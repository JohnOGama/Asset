"use strict";(self.webpackChunkasset=self.webpackChunkasset||[]).push([[7410],{55680:function(e,s){s.Z=function(){var e=new Date,s=e.getFullYear(),t=e.getMonth()+1,a=e.getDate();return e.getHours(),e.getMinutes(),e.getSeconds(),t+"/"+a+"/"+s}},56215:function(e,s,t){var a=t(31243);s.Z=function(e,s,t,r,o,n,l){try{a.Z.post("http://localhost:3001/log/putUserNotif",{logtype:e,module:s,userNotifID:t,receiver_name:r,receiver_dept:o,logvalues:n,userID:l}).then((function(e){var s=e.data.message;"Insert Success"==s?!0:console.log(s)})).catch((function(e){console.log(e)}))}catch(c){console.log("Writing error -- "+c)}}},27410:function(e,s,t){t.r(s);var a=t(4942),r=t(1413),o=t(29439),n=t(72791),l=t(31243),c=t(24750),i=t(66798),d=t(14693),u=t(27391),h=t(15493),g=t(24518),m=t(5574),f=t(97123),p=t(39157),Z=t(51691),v=t(65661),y=t(35527),A=t(59962),b=t.n(A),I=t(78983),E=t(77530),x=t(55680),j=t(57689),D=t(17746),S=t(44293),U=t(54970),w=t(56215),C=(t(4751),t(80184));s.default=function(){var e=(0,j.s0)(),s="",t="",A=(0,n.useState)(""),N=(0,o.Z)(A,2),k=N[0],_=N[1],F=(0,n.useState)("red"),R=(0,o.Z)(F,2),O=R[0],T=R[1],M=(0,n.useState)([]),z=(0,o.Z)(M,2),K=z[0],G=z[1],L=(0,n.useState)(""),Y=(0,o.Z)(L,2),P=Y[0],W=Y[1],H=(0,n.useState)([]),V=(0,o.Z)(H,2),X=V[0],$=V[1],q=(0,n.useState)(""),B=(0,o.Z)(q,2),J=B[0],Q=B[1],ee=(0,n.useState)({}),se=(0,o.Z)(ee,2),te=se[0],ae=se[1],re=(0,n.useState)({userid:"",notes:""}),oe=(0,o.Z)(re,2),ne=oe[0],le=oe[1],ce=(0,n.useState)({receiverID:"",receiveremail:"",receivername:"",positionID:"",deptID:""}),ie=(0,o.Z)(ce,2),de=ie[0],ue=ie[1];function he(){try{t=s=(0,S.pe)(window.localStorage.getItem("Kgr67W@"),D.Z.secretkeylocal)}catch(a){(0,U.Z)("Error","AssetUser","CheckRole Local Storage is tampered",a.message,s),e("/dashboard")}}function ge(){try{he(),"Admin"==t||"IT"==t?null==!window.localStorage.getItem("id")||"0"!==window.localStorage.getItem("id")?(s=(0,S.pe)(window.localStorage.getItem("id"),D.Z.secretkeylocal),window.localStorage.setItem("Kvsf45_","0")):e("/login"):e("/dashboard")}catch(a){e("/dashboard")}}function me(){try{l.Z.post("http://localhost:3001/assets/getallassetsavailable").then((function(e){var s=e.data.message;"Record Found"==s?G(e.data.result):"No Record Found"==s&&(_("No assets available"),T("red"))})).catch((function(e){(0,U.Z)("Error","AssetUser","GetAllAssets_Available /assets/getallassetsavailable","then/catch \n "+e.message,s)}))}catch(e){(0,U.Z)("Error","AssetUser","GetAllAssets_Available /assets/getallassetsavailable","try/catch \n"+e.message,s)}}function fe(e){le((0,r.Z)((0,r.Z)({},ne),{},(0,a.Z)({},e.target.name,e.target.value)))}(0,n.useEffect)((function(){he(),ge(),function(){try{var e="http://localhost:3001/getuserbyactive";l.Z.post(e,{userID:s}).then((function(e){var t=e.data.message;"Record Found"==t?$(e.data.result):"No Record Found"==t&&(0,U.Z)("Error","AssetUser","useeffect /getuserbyactive'",t,s)})).catch((function(e){(0,U.Z)("Error","AssetUser","useeffect /getuserbyactive'","Error in then/catch "+e.message,s)}))}catch(t){(0,U.Z)("Error","AssetUser","GetUsersActive /getuserbyactive'","Error in try/catch "+t.message,s)}}(),function(){try{var e="http://localhost:3001/assets/getassetfordeploystatus";l.Z.post(e).then((function(e){var t=e.data.message;"Record Found"==t?W(e.data.result[0].assetStatusID):"No Record Found"==t&&(0,U.Z)("Error","AssetUser","useeffect /assets/getassetfordeploystatus",e.data.message2,s)})).catch((function(e){(0,U.Z)("Error","AssetUser","useeffect /assets/getassetfordeploystatus","then/catch \n"+e.message,s)}))}catch(t){(0,U.Z)("Error","AssetUser","useeffect /assets/getassetfordeploystatus","try/catch \n"+t.message,s)}}()}),[]),(0,n.useEffect)((function(){try{l.Z.post("http://localhost:3001/assets/getallassetsavailable").then((function(e){var s=e.data.message;"Record Found"==s?G(e.data.result):"No Record Found"==s&&(_("No assets available"),T("red"))})).catch((function(e){(0,U.Z)("Error","AssetUser","useEffect /assets/getallassetsavailable","then/catch \n "+e.message,s)}))}catch(e){(0,U.Z)("Error","AssetUser","useEffect /assets/getallassetsavailable","try/catch \n"+e.message,s)}}),[]),(0,n.useEffect)((function(){me()}),[]);var pe=function(){Ae(!1)};var Ze=n.useState(!1),ve=(0,o.Z)(Ze,2),ye=ve[0],Ae=ve[1],be=(0,n.useState)(0),Ie=(0,o.Z)(be,2),Ee=Ie[0],xe=Ie[1];return(0,C.jsx)(I.b7,{xs:12,children:(0,C.jsxs)(I.xH,{className:"mb-3",size:"sm",children:[(0,C.jsx)(I.bn,{children:(0,C.jsxs)("h6",{children:[(0,C.jsxs)("span",{className:"message",style:{color:"#5da4f5"},children:[" ",(0,C.jsx)(C.Fragment,{children:" Asset Check Out  "})]}),(0,C.jsx)("br",{}),(0,C.jsxs)("strong",{children:[(0,C.jsx)("span",{className:"message",style:{color:O},children:(0,C.jsx)("p",{children:k})})," "]})]})}),(0,C.jsx)(I.sl,{children:(0,C.jsx)(I.lx,{onSubmit:function(e){try{if(e.preventDefault(),Object.keys(te).length>0){var t=ne.userid,a=J,o=ne.notes;""!==t&&""!==a&&""!==o?(_(""),T(""),xe(Object.keys(te).length),function(e){try{var t=e,a="http://localhost:3001/email/getemailinfo";l.Z.post(a,{rowId:t}).then((function(e){var t=e.data.message;"Record Found"==t?ue((0,r.Z)((0,r.Z)({},de),{},{receiverID:e.data.result[0].userID,receiveremail:e.data.result[0].email,receivername:e.data.result[0].userName,positionID:e.data.result[0].positionID,deptID:e.data.result[0].deptID})):"No Record Found"==t&&(0,U.Z)("Error","AssetUser","GetEmailInfo /email/getemailinfo","then/catch \n "+e.data.message,s)})).catch((function(e){(0,U.Z)("Error","AssetUser","GetEmailInfo /assets/getallassetsavailable","then/catch \n "+e.message,s)}))}catch(o){(0,U.Z)("Error","AssetUser","GetEmailInfo /assets/updateassetdeploy","Error in try/catch",s)}}(t),Ae(!0)):(Ae(!1),_(" All Fields must not be Empty"),T("orange"))}else _("No Asset Selected"),T("orange")}catch(n){(0,U.Z)("Error","AssetUser","handleSubmit /assets/searchuser",n.message,s)}},children:(0,C.jsxs)(I.rb,{children:[(0,C.jsxs)(I.b7,{xs:4,md:3,xl:3,children:[(0,C.jsx)(I.LX,{size:"sm",className:"mb-3","aria-label":"Small select example",name:"userid",onChange:fe,children:X.map((function(e,s){return(0,C.jsxs)("option",{value:e.userDisplayID,children:[" ",e.fullname," "]},e.userDisplayID)}))}),(0,C.jsx)(I.YR,{size:"sm",className:"mb-3",children:(0,C.jsx)(i._,{dateAdapter:c.y,children:(0,C.jsx)(d.M,{size:"sm",name:"checkout  ",label:"Plan Checkout ",fullWidth:!0,true:!0,onChange:function(e){return Q(e)}})})}),(0,C.jsx)(I.YR,{size:"sm",className:"mb-3",children:(0,C.jsx)(u.Z,{onChange:fe,name:"notes",id:"outlined-textarea",fullWidth:!0,label:"Notes",placeholder:"You have asset(s) to be pickup on schedule date",multiline:!0,rows:5})}),(0,C.jsx)("div",{className:"d-grid",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,C.jsx)(I.u5,{color:"success",type:"submit",children:"Assign Asset"})})]}),(0,C.jsxs)(I.b7,{xs:6,md:9,xl:9,children:[(0,C.jsx)(h._$,{rows:K,columns:[{field:"assetCode",headerName:"Code",width:120,editable:!1},{field:"assetCategName",headerName:"Category",width:100,editable:!1},{field:"assetName",headerName:"Name",width:200,editable:!1},{field:"statusName",headerName:"Status",width:130,editable:!1}],initialState:{pagination:{paginationModel:{pageSize:5}}},pageSizeOptions:[5],checkboxSelection:!0,disableRowSelectionOnClick:!0,onRowSelectionModelChange:function(e){return ae(e)}}),(0,C.jsxs)(m.Z,{open:ye,onClose:pe,PaperComponent:function(e){return(0,C.jsx)(b(),{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:(0,C.jsx)(y.Z,(0,r.Z)({},e))})},"aria-labelledby":"draggable-dialog-title",children:[(0,C.jsx)(v.Z,{style:{cursor:"move"},id:"draggable-dialog-title",children:"Checkout  Asset(s)"}),(0,C.jsx)(p.Z,{children:(0,C.jsxs)(Z.Z,{children:["Are you sure you want to Checkout  asset(s) ?",(0,C.jsx)("br",{}),"Selected : ",Ee,(0,C.jsx)("br",{}),(0,C.jsx)("br",{}),"Note : Selected user will receive email notification"]})}),(0,C.jsxs)(f.Z,{children:[(0,C.jsx)(g.Z,{autoFocus:!0,onClick:pe,children:"Cancel"}),(0,C.jsx)(g.Z,{onClick:function(){Ae(!1),function(){var e=ne.userid,t=ne.notes,a=de.positionID,r=de.deptID;try{te.forEach((function(o,n){var c=o,i="http://localhost:3001/assets/putassetsdetail";l.Z.post(i,{varuserid:e,assetid:c,positionID:a,departmentID:r,checkout:J,userID:s,assetdeploy:P,varnotes:t}).then((function(a){var r=a.data.message;if("Insert Success"==r){var o=window.localStorage.getItem("Kvsf45_");(0,U.Z)(" A For Testing","Reading write once : "+o,"","",""),"0"==o&&window.localStorage.setItem("Kvsf45_","1"),(0,U.Z)("Message","AssetUser","InsertAssetDetail /assets/putassetsdetail","Asset Checkout \n AssetID: "+c+"\n Checkout To :  "+e+"\n Status :  "+P+"\n Desc : "+t,s),function(e){try{ge();var t="http://localhost:3001/assets/updateassetdeploy";l.Z.post(t,{assetdeploy:P,varassetid:e,userID:s}).then((function(e){var t=e.data.message;"Update Success"==t?(0,U.Z)("Message","AssetUser","UpdateAssetDeploy /assets/updateassetdeploy",t,s):"Update Error"==t&&(0,U.Z)("Error","AssetUser","UpdateAssetDeploy /assets/updateassetdeploy",e.data.message2,s)})).catch((function(e){(0,U.Z)("Error","AssetUser","UpdateAssetDeploy /assets/updateassetdeploy",e.message,s)}))}catch(a){(0,U.Z)("Error","AssetUser","UpdateAssetDeploy /assets/updateassetdeploy","Error in try/catch"+a.message,s)}}(c)}else"Insert Error"==r&&(0,U.Z)("Error","AssetUser","InsertAssetDetail /assets/putassetsdetail",a.data.message2,s)})).catch((function(e){(0,U.Z)("Error","AssetUser","InsertAssetDetail /assets/putassetsdetail"," Error in then/catch "+e.message,s)}))}))}catch(o){(0,U.Z)("Error","AssetUser","InsertAssetDetail /assets/putassetsdetail"," Error in try/catch "+o.message,s)}}(),function(e){var t=(0,x.Z)(),a=D.Z.ALLOW_SENDEMAIL_CHECKOUT,r=window.localStorage.getItem("Kvsf45_");(0,U.Z)("For Testing","Check/prepare for sending email : "+window.localStorage.getItem("Kvsf45_"),"","",""),(0,U.Z)("For Testing","using const for sending email : "+r,"","","");try{var o={email_to:de.receiveremail,email_sender:D.Z.email_sender,reply_to:D.Z.reply_to,name:de.receivername,notes:ne.notes,date:t};"1"==r?"send"==a?E.ZP.send(D.Z.YOUR_SERVICE_ID,D.Z.YOUR_TEMPLATE_ID,o,D.Z.public_key).then((function(t){(0,w.Z)("Info","AssetUser",e,de.receivername,de.deptID,"Asset Check Out by IT \nNotes : "+o.notes,s)}),(function(t){(0,U.Z)("Error","AssetUser","sendEmail ","Error in sending emailjs \nInfo : Failed sending email to selected user : "+e+"\nPlan receive asset : "+o.date+"\n Notes : "+o.notes+"\n"+t.message,s)})):(0,w.Z)("Info","AssetUser",e,de.receivername,de.deptID,"Asset Check Out by IT \nNotes : "+o.notes,s):(0,U.Z)("For Testing","Value of "+r,"","","")}catch(n){(0,U.Z)("Error","AssetUser","send emailjs","Error in try/catch "+n.message,s)}}(ne.userid),me()},children:"Checkout"})]})]})]})]})})})]})})}}}]);
//# sourceMappingURL=7410.64e57a4a.chunk.js.map