"use strict";(self.webpackChunkasset=self.webpackChunkasset||[]).push([[578],{55680:function(e,t){t.Z=function(){var e=new Date,t=e.getFullYear(),o=e.getMonth()+1,a=e.getDate();return e.getHours(),e.getMinutes(),e.getSeconds(),o+"/"+a+"/"+t}},56215:function(e,t,o){var a=o(31243);t.Z=function(e,t,o,r,n,s,i){try{a.Z.post("http://localhost:3001/log/putUserNotif",{logtype:e,module:t,userNotifID:o,receiver_name:r,receiver_dept:n,logvalues:s,userID:i}).then((function(e){var t=e.data.message;"Insert Success"==t?!0:console.log(t)})).catch((function(e){console.log(e)}))}catch(l){console.log("Writing error -- "+l)}}},80578:function(e,t,o){o.r(t);var a=o(1413),r=o(29439),n=o(72791),s=o(31243),i=o(78983),l=o(27391),d=o(15493),c=o(57689),u=o(17746),p=o(44293),h=o(54970),g=o(77530),m=o(55680),v=o(24518),f=o(5574),b=o(97123),Z=o(39157),x=o(51691),y=o(65661),S=o(35527),w=o(59962),E=o.n(w),R=o(2199),_=o(56215),j=o(80184);t.default=function(){var e=(0,c.s0)(),t="",o="",w=(0,n.useState)(""),C=(0,r.Z)(w,2),I=(C[0],C[1],(0,n.useState)({})),N=(0,r.Z)(I,2),P=(N[0],N[1],(0,n.useState)("")),D=(0,r.Z)(P,2),A=D[0],k=D[1],z=(0,n.useState)("red"),T=(0,r.Z)(z,2),L=T[0],M=T[1],B=(0,n.useState)([]),F=(0,r.Z)(B,2),W=F[0],O=F[1],U=(0,n.useState)(""),V=(0,r.Z)(U,2),H=V[0],q=V[1],K=(0,n.useState)(""),G=(0,r.Z)(K,2),Y=G[0],X=G[1];function J(){try{!function(){try{(0,p.pe)(window.localStorage.getItem("Kgr67W@"),u.Z.secretkeylocal)}catch(o){(0,h.Z)("Error","AssetPullout","CheckRole Local Storage is tampered",o.message,t),e("/dashboard")}}(),null==!window.localStorage.getItem("id")||"0"!==window.localStorage.getItem("id")?t=(0,p.pe)(window.localStorage.getItem("id"),u.Z.secretkeylocal):e("/login")}catch(o){e("/dashboard")}}(0,n.useEffect)((function(){J()}),[]),(0,n.useEffect)((function(){""==t&&J();s.Z.post("http://localhost:3001/status/getasset_status_users").then((function(o){var a=o.data.message;"Record Found"==a?O(o.data.result):"No Record Found"==a&&((0,h.Z)("Message","AssetPullout","useEffect /assets/getasset_status_users'",a,t),e("/500"))})).catch((function(e){(0,h.Z)("Error","AssetPullout","useEffect /assets/getasset_status_users'",e.message,t)}))}),[]);var $=n.useState(!1),Q=(0,r.Z)($,2),ee=Q[0],te=Q[1],oe=(0,n.useState)(0),ae=(0,r.Z)(oe,2),re=ae[0],ne=ae[1];(0,n.useEffect)((function(){}),[re]);var se=function(){te(!1)},ie=(0,n.useState)([]),le=(0,r.Z)(ie,2),de=le[0],ce=le[1],ue=(0,n.useState)({}),pe=(0,r.Z)(ue,2),he=pe[0],ge=pe[1];function me(e){try{"assetID"==e.target.name?q(e.target.value.trim()):"notes"==e.target.name&&X(e.target.value.trim()),k(""),M("red")}catch(t){console.log(t)}}function ve(){var e=(0,m.Z)();o=window.localStorage.getItem("display");var a=u.Z.ALLOW_SENDEMAIL_PULLOUT_BY_USER,r=window.localStorage.getItem("Kvsf45_");try{var n={email_to:u.Z.ASSET_EMAIL,email_sender:u.Z.email_sender,reply_to:u.Z.reply_to,name:u.Z.ASSET_RECEIVERNAME,notes:Y,date:e,user_name:o};"1"==r&&"send"==a?g.ZP.send(u.Z.USER_SERVICE_ID,u.Z.USER_TEMPLATE_ID,n,u.Z.public_key).then((function(e){console.log("SUCCESS!",e.status,e.text)}),(function(e){console.log("FAILED...",e)})):(0,_.Z)("Info","AssetPullout",t,"Asset Pullout: \nNotes : "+n.notes,t)}catch(s){(0,h.Z)("Error","AssetPullout","sendEmail not successful","Error in try/catch \n"+s.message,t)}}return(0,n.useEffect)((function(){!function(){try{""==t&&J();var e="http://localhost:3001/assets/viewallassetsassigndeployed_user";s.Z.post(e,{userID:t}).then((function(e){var t=e.data.message;"Record Found"==t&&ce(e.data.result)})).catch((function(e){(0,h.Z)("Error","AssetPullout","LoadAsset /assets/viewallassetsassigndeployed_user'","Error in then/catch \n"+e.message,t)}))}catch(o){(0,h.Z)("Error","AssetPullout","LoadAsset /assets/viewallassetsassigndeployed_user'","Error in try/catch \n"+o.message,t)}}()}),[]),(0,n.useEffect)((function(){}),[H]),(0,n.useEffect)((function(){}),[Y]),(0,j.jsx)(i.b7,{children:(0,j.jsxs)(i.xH,{className:"mb-3",size:"sm",children:[(0,j.jsx)(i.bn,{children:(0,j.jsxs)("h6",{children:[(0,j.jsxs)("span",{className:"message",style:{color:"#5da4f5"},children:[" ",(0,j.jsx)(j.Fragment,{children:" Current Asset(s) "})]}),(0,j.jsx)("br",{}),(0,j.jsxs)("strong",{children:[(0,j.jsx)("span",{className:"message",style:{color:L},children:(0,j.jsx)("p",{children:A})})," "]})]})}),(0,j.jsx)(i.lx,{onSubmit:function(e){try{e.preventDefault(),k(""),M("red")}catch(t){console.log(t)}},children:(0,j.jsxs)(i.rb,{children:[(0,j.jsx)(i.b7,{xs:3,children:(0,j.jsxs)(i.sl,{children:[(0,j.jsx)(i.LX,{size:"sm",className:"mb-3","aria-label":"Small select example",name:"assetID",onChange:me,children:W.map((function(e){return(0,j.jsxs)("option",{value:e.assetStatusID,children:[" ",e.statusName," "]},e.assetStatusID)}))}),(0,j.jsx)(i.YR,{size:"sm",className:"mb-3",children:(0,j.jsx)(l.Z,{onChange:me,name:"notes",id:"outlined-textarea",fullWidth:!0,label:"Notes",placeholder:"Notes",multiline:!0,rows:5})}),(0,j.jsxs)(R.Z,{style:{display:"flex",alignItems:"left",justifyContent:"left"},children:[(0,j.jsx)(i.u5,{onClick:function(){try{var e=0;he.forEach((function(t,o){e+=1})),e>0?(te(!0),ne(e)):(k("No asset selected"),M("red"))}catch(t){console.log(t)}},style:{margin:"5px",width:"120%"},color:"success",children:" Pullout"}),(0,j.jsx)(i.u5,{onClick:function(){e("/configurations/viewpulloutuser")},style:{margin:"5px",width:"120%"},color:"success",children:" View  "})]}),(0,j.jsxs)(f.Z,{open:ee,onClose:se,PaperComponent:function(e){return(0,j.jsx)(E(),{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:(0,j.jsx)(S.Z,(0,a.Z)({},e))})},"aria-labelledby":"draggable-dialog-title",children:[(0,j.jsx)(y.Z,{style:{cursor:"move"},id:"draggable-dialog-title",children:"Checkout / Pullout Assets"}),(0,j.jsx)(Z.Z,{children:(0,j.jsxs)(x.Z,{children:["Are you sure you want to Pullout  asset(s) ?",(0,j.jsx)("br",{}),"Selected : (",re,")"]})}),(0,j.jsxs)(b.Z,{children:[(0,j.jsx)(v.Z,{autoFocus:!0,onClick:se,children:"Cancel"}),(0,j.jsx)(v.Z,{onClick:function(){te(!0);try{""==t&&J(),he.forEach((function(e,o){var a=e;s.Z.post("http://localhost:3001/assets/pulloutasset_selectedbyuser",{userID:t,detailid:a,assetID:H,notes:Y}).then((function(e){var o=e.data.message;"Update Success"==o?((0,h.Z)("Message","AssetPullout","handlePullout /assets/pulloutasset_selectedbyuser"," User advice for pullout \n AssetID: "+H+"\n Detail ID  :  "+a+"\n Reason for Pullout :  "+Y+"\n User : "+t,t),"0"==window.localStorage.getItem("Kvsf45_")&&window.localStorage.setItem("Kvsf45_","1")):"Update Error"==o&&(0,h.Z)("Error","AssetPullout","handlePullout /assets/pulloutasset_selectedbyuser'","AssetID : "+a+"\n Detail ID  :  "+a+"\n Reason for Pullout :  "+Y+"\n "+e.data.message2,t)})).catch((function(e){(0,h.Z)("Error","AssetPullout","handlePullout /assets/pulloutasset_selectedbyuser'","Error in then/catch "+e.message,t)}))})),ve(),te(!1)}catch(o){te(!1),(0,h.Z)("Error","AssetPullout","handlePullout /assets/asset_bydetail'","Error in main try/catch  "+o.message,t)}finally{ve(),e("/base/assetbyuser")}},children:"Pullout"})]})]})]})}),(0,j.jsx)(i.b7,{xs:9,children:(0,j.jsx)(i.sl,{children:(0,j.jsx)(i.YR,{size:"sm",className:"mb-3",children:(0,j.jsx)("div",{style:{height:400,width:"100%"},children:(0,j.jsx)(d._$,{rows:de,columns:[{field:"assetCode",headerName:"Code",width:100,editable:!1},{field:"assetName",headerName:"Name",width:200,editable:!1},{field:"statusName",headerName:"Status",width:130,editable:!1},{field:"assetCategName",headerName:"Category",width:130,editable:!1},{field:"displayName",headerName:"Release By",width:100,editable:!1},{field:"datecheckin",headerName:"Date Received",width:130,editable:!1}],initialState:{pagination:{paginationModel:{pageSize:5}}},pageSizeOptions:[5],checkboxSelection:!0,disableRowSelectionOnClick:!0,onRowSelectionModelChange:function(e){return ge(e)}})})})})})]})})]})})}},77530:function(e,t,o){o.d(t,{ZP:function(){return d}});var a={_origin:"https://api.emailjs.com"},r=function(e,t,o){if(!e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!o)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0},n=o(43144),s=o(15671),i=(0,n.Z)((function e(t){(0,s.Z)(this,e),this.status=t?t.status:0,this.text=t?t.responseText:"Network Error"})),l=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(r,n){var s=new XMLHttpRequest;s.addEventListener("load",(function(e){var t=e.target,o=new i(t);200===o.status||"OK"===o.text?r(o):n(o)})),s.addEventListener("error",(function(e){var t=e.target;n(new i(t))})),s.open("POST",a._origin+e,!0),Object.keys(o).forEach((function(e){s.setRequestHeader(e,o[e])})),s.send(t)}))},d={init:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https://api.emailjs.com";a._userID=e,a._origin=t},send:function(e,t,o,n){var s=n||a._userID;r(s,e,t);var i={lib_version:"3.11.0",user_id:s,service_id:e,template_id:t,template_params:o};return l("/api/v1.0/email/send",JSON.stringify(i),{"Content-type":"application/json"})},sendForm:function(e,t,o,n){var s=n||a._userID,i=function(e){var t;if(!(t="string"===typeof e?document.querySelector(e):e)||"FORM"!==t.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return t}(o);r(s,e,t);var d=new FormData(i);return d.append("lib_version","3.11.0"),d.append("service_id",e),d.append("template_id",t),d.append("user_id",s),l("/api/v1.0/email/send-form",d)}}},2199:function(e,t,o){o.d(t,{Z:function(){return y}});var a=o(4942),r=o(63366),n=o(87462),s=o(72791),i=o(63733),l=o(94419),d=o(12065),c=o(14036),u=o(66934),p=o(31402),h=o(75878),g=o(21217);function m(e){return(0,g.Z)("MuiButtonGroup",e)}var v=(0,h.Z)("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary"]),f=o(91793),b=o(80184),Z=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],x=(0,u.ZP)("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:function(e,t){var o=e.ownerState;return[(0,a.Z)({},"& .".concat(v.grouped),t.grouped),(0,a.Z)({},"& .".concat(v.grouped),t["grouped".concat((0,c.Z)(o.orientation))]),(0,a.Z)({},"& .".concat(v.grouped),t["grouped".concat((0,c.Z)(o.variant))]),(0,a.Z)({},"& .".concat(v.grouped),t["grouped".concat((0,c.Z)(o.variant)).concat((0,c.Z)(o.orientation))]),(0,a.Z)({},"& .".concat(v.grouped),t["grouped".concat((0,c.Z)(o.variant)).concat((0,c.Z)(o.color))]),t.root,t[o.variant],!0===o.disableElevation&&t.disableElevation,o.fullWidth&&t.fullWidth,"vertical"===o.orientation&&t.vertical]}})((function(e){var t=e.theme,o=e.ownerState;return(0,n.Z)({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},"contained"===o.variant&&{boxShadow:(t.vars||t).shadows[2]},o.disableElevation&&{boxShadow:"none"},o.fullWidth&&{width:"100%"},"vertical"===o.orientation&&{flexDirection:"column"},(0,a.Z)({},"& .".concat(v.grouped),(0,n.Z)({minWidth:40,"&:not(:first-of-type)":(0,n.Z)({},"horizontal"===o.orientation&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},"vertical"===o.orientation&&{borderTopRightRadius:0,borderTopLeftRadius:0},"outlined"===o.variant&&"horizontal"===o.orientation&&{marginLeft:-1},"outlined"===o.variant&&"vertical"===o.orientation&&{marginTop:-1}),"&:not(:last-of-type)":(0,n.Z)({},"horizontal"===o.orientation&&{borderTopRightRadius:0,borderBottomRightRadius:0},"vertical"===o.orientation&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},"text"===o.variant&&"horizontal"===o.orientation&&(0,a.Z)({borderRight:t.vars?"1px solid rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):"1px solid ".concat("light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"&.".concat(v.disabled),{borderRight:"1px solid ".concat((t.vars||t).palette.action.disabled)}),"text"===o.variant&&"vertical"===o.orientation&&(0,a.Z)({borderBottom:t.vars?"1px solid rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):"1px solid ".concat("light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"&.".concat(v.disabled),{borderBottom:"1px solid ".concat((t.vars||t).palette.action.disabled)}),"text"===o.variant&&"inherit"!==o.color&&{borderColor:t.vars?"rgba(".concat(t.vars.palette[o.color].mainChannel," / 0.5)"):(0,d.Fq)(t.palette[o.color].main,.5)},"outlined"===o.variant&&"horizontal"===o.orientation&&{borderRightColor:"transparent"},"outlined"===o.variant&&"vertical"===o.orientation&&{borderBottomColor:"transparent"},"contained"===o.variant&&"horizontal"===o.orientation&&(0,a.Z)({borderRight:"1px solid ".concat((t.vars||t).palette.grey[400])},"&.".concat(v.disabled),{borderRight:"1px solid ".concat((t.vars||t).palette.action.disabled)}),"contained"===o.variant&&"vertical"===o.orientation&&(0,a.Z)({borderBottom:"1px solid ".concat((t.vars||t).palette.grey[400])},"&.".concat(v.disabled),{borderBottom:"1px solid ".concat((t.vars||t).palette.action.disabled)}),"contained"===o.variant&&"inherit"!==o.color&&{borderColor:(t.vars||t).palette[o.color].dark},{"&:hover":(0,n.Z)({},"outlined"===o.variant&&"horizontal"===o.orientation&&{borderRightColor:"currentColor"},"outlined"===o.variant&&"vertical"===o.orientation&&{borderBottomColor:"currentColor"})}),"&:hover":(0,n.Z)({},"contained"===o.variant&&{boxShadow:"none"})},"contained"===o.variant&&{boxShadow:"none"})))})),y=s.forwardRef((function(e,t){var o=(0,p.Z)({props:e,name:"MuiButtonGroup"}),a=o.children,d=o.className,u=o.color,h=void 0===u?"primary":u,g=o.component,v=void 0===g?"div":g,y=o.disabled,S=void 0!==y&&y,w=o.disableElevation,E=void 0!==w&&w,R=o.disableFocusRipple,_=void 0!==R&&R,j=o.disableRipple,C=void 0!==j&&j,I=o.fullWidth,N=void 0!==I&&I,P=o.orientation,D=void 0===P?"horizontal":P,A=o.size,k=void 0===A?"medium":A,z=o.variant,T=void 0===z?"outlined":z,L=(0,r.Z)(o,Z),M=(0,n.Z)({},o,{color:h,component:v,disabled:S,disableElevation:E,disableFocusRipple:_,disableRipple:C,fullWidth:N,orientation:D,size:k,variant:T}),B=function(e){var t=e.classes,o=e.color,a=e.disabled,r=e.disableElevation,n=e.fullWidth,s=e.orientation,i=e.variant,d={root:["root",i,"vertical"===s&&"vertical",n&&"fullWidth",r&&"disableElevation"],grouped:["grouped","grouped".concat((0,c.Z)(s)),"grouped".concat((0,c.Z)(i)),"grouped".concat((0,c.Z)(i)).concat((0,c.Z)(s)),"grouped".concat((0,c.Z)(i)).concat((0,c.Z)(o)),a&&"disabled"]};return(0,l.Z)(d,m,t)}(M),F=s.useMemo((function(){return{className:B.grouped,color:h,disabled:S,disableElevation:E,disableFocusRipple:_,disableRipple:C,fullWidth:N,size:k,variant:T}}),[h,S,E,_,C,N,k,T,B.grouped]);return(0,b.jsx)(x,(0,n.Z)({as:v,role:"group",className:(0,i.Z)(B.root,d),ref:t,ownerState:M},L,{children:(0,b.jsx)(f.Z.Provider,{value:F,children:a})}))}))}}]);
//# sourceMappingURL=578.a1a5401d.chunk.js.map