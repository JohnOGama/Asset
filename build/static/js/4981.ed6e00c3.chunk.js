"use strict";(self.webpackChunkasset=self.webpackChunkasset||[]).push([[4981],{65784:function(e,a,s){s.r(a),s.d(a,{default:function(){return g}});var t=s(4942),i=s(1413),n=s(29439),r=s(72791),l=s(31243),o=s(78983),c=s.p+"static/media/defaultProfile.95c261e409fc80feca70.png",d=s(44293),m=s(17746),u=s(54970),p=s(57689),f=s(80184),g=function(){var e=(0,p.s0)(),a="",g=(0,r.useState)([]),h=(0,n.Z)(g,2),x=h[0],j=h[1],y=(0,r.useState)([]),I=(0,n.Z)(y,2),b=I[0],U=I[1],Z=(0,r.useState)(""),D=(0,n.Z)(Z,2),v=D[0],E=D[1],N=(0,r.useState)(""),P=(0,n.Z)(N,2),S=P[0],z=P[1],w=(0,r.useState)(""),C=(0,n.Z)(w,2),F=C[0],R=C[1],L=(0,r.useState)({categoryID:"",categoryname:"",positionID:"",firstname:"",lastname:"",displayname:"",email:"",imgFile:""}),k=(0,n.Z)(L,2),G=k[0],Y=k[1];function M(){null==!window.localStorage.getItem("id")||"0"!==window.localStorage.getItem("id")?a=(0,d.pe)(window.localStorage.getItem("id"),m.Z.secretkeylocal):e("/login")}(0,r.useEffect)((function(){M()}),[]),(0,r.useEffect)((function(){""==a&&M();l.Z.post("http://localhost:3001/getCategory").then((function(e){var s=e.data.message;"Record Found"==s?j(e.data.result):"No Record Found"==s&&(0,u.Z)("Message","UpdateProfile","useEffect /getCategory",s,a)})).catch((function(e){(0,u.Z)("Error","UpdateProfile","useEffect /getCategory",e.message,a)}))}),[]),(0,r.useEffect)((function(){""==a&&M();l.Z.post("http://localhost:3001/position/viewallposition").then((function(e){var s=e.data.message;"Record Found"===s?U(e.data.result):"No Record Found"===s&&(0,u.Z)("Message","UpdateProfile","useEffect /position/viewallposition",s,a)})).catch((function(e){(0,u.Z)("Error","UpdateProfile","useEffect /position/viewallposition",e.message,a)}))}),[]),(0,r.useEffect)((function(){!function(){try{""==a&&M();var e=a,s="http://localhost:3001/users/getuserprofile";l.Z.post(s,{userid:e}).then((function(e){var s=e.data.message;"Profile Found"==s?Y((0,i.Z)((0,i.Z)({},G),{},{categoryID:e.data.result[0].groupTypeID,categoryname:e.data.result[0].categoryName,positionID:e.data.result[0].positionID,firstname:e.data.result[0].firstname,lastname:e.data.result[0].lastname,displayname:e.data.result[0].displayName,email:e.data.result[0].email,imgFile:e.data.result[0].imgFilename})):"No Profile Found"==s&&(0,u.Z)("Message","UpdateProfile","LoadProfile /users/getuserprofile",e.data.message2,a)})).catch((function(e){(0,u.Z)("Error","UpdateProfile","LoadProfile /users/getuserprofile","Error in then/catch \n"+e.message,a)}))}catch(t){(0,u.Z)("Error","UpdateProfile","LoadProfile /users/getuserprofile","Error in try/catch \n"+t.message,a)}}()}),[]);var O=function(e){Y((function(a){return(0,i.Z)((0,i.Z)({},a),{},(0,t.Z)({},e.target.name,[e.target.value]))}))};return(0,r.useEffect)((function(){}),[G]),(0,f.jsx)(o.rb,{children:(0,f.jsx)(o.b7,{xs:12,children:(0,f.jsxs)(o.xH,{className:"mb-4",children:[(0,f.jsx)(o.bn,{children:(0,f.jsxs)("h6",{children:[(0,f.jsxs)("span",{className:"message",style:{color:"#5da4f5"},children:[" ",(0,f.jsx)(f.Fragment,{children:" Update Profile"})]}),(0,f.jsx)("br",{}),(0,f.jsxs)("strong",{children:[(0,f.jsx)("span",{className:"message",style:{color:S},children:(0,f.jsx)("p",{children:v})})," "]})]})}),(0,f.jsxs)(o.lx,{onSubmit:function(e){try{if(""==a&&M(),e.preventDefault(),""==!G.categoryID&&""==!G.positionID&&""==!G.lastname&&""==!G.firstname&&""==!G.email&&""==!G.displayname){var s=G.categoryID,t=G.positionID,i=G.firstname,n=G.lastname,r=G.displayname,o=G.email,c=a;l.Z.post("http://localhost:3001/auth/updateProfile",{firstname:i,lastname:n,email:o,positionID:t,categoryID:s,displayname:r,userDisplayID:c}).then((function(e){var s=e.data.message;"Upload Success"==s?((0,u.Z)("Message","UpdateProfile","handleSubmit /auth/updateProfile"," Update Profile \n Name: "+n+", "+i+"\n....  \n User : "+a,a),E("Update successfull"),z("green")):"Upload Error"==s&&(E("Update Error"),z("red"),(0,u.Z)("Error","UpdateProfile","handleSubmit /auth/updateProfile",e.data.message2,a))}))}else E("Incomplete Information")}catch(d){(0,u.Z)("Error","UpdateProfile","handleSubmit",d.message,a)}},children:[(0,f.jsxs)(o.rb,{children:[(0,f.jsx)(o.b7,{children:(0,f.jsxs)(o.sl,{children:[(0,f.jsx)(o.LX,{size:"sm",className:"mb-3","aria-label":"Small select example",name:"categoryID",onChange:O,value:G.categoryID,children:x.map((function(e,a){return(0,f.jsxs)("option",{name:a.toString(),value:e.categoryID,children:[" ",e.categoryName," "]},e.categoryID)}))}),(0,f.jsx)(o.LX,{size:"sm",className:"mb-3","aria-label":"Small select example",name:"positionID",onChange:O,value:G.positionID,children:b.map((function(e,a){return(0,f.jsxs)("option",{name:a.toString(),value:e.id,children:[" ",e.positionName," "]},e.id)}))}),(0,f.jsxs)(o.YR,{size:"sm",className:"mb-3",children:[(0,f.jsx)(o.wV,{id:"inputGroup-sizing-sm",children:"Firstname"}),(0,f.jsx)(o.jO,{"aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-sm",name:"firstname",onChange:O,value:G.firstname})]}),(0,f.jsxs)(o.YR,{size:"sm",className:"mb-3",children:[(0,f.jsx)(o.wV,{id:"inputGroup-sizing-sm",children:"Lastname"}),(0,f.jsx)(o.jO,{"aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-sm",name:"lastname",onChange:O,value:G.lastname})]}),(0,f.jsxs)(o.YR,{size:"sm",className:"mb-3",children:[(0,f.jsx)(o.wV,{id:"inputGroup-sizing-sm",children:"Display Name"}),(0,f.jsx)(o.jO,{"aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-sm",name:"displayname",onChange:O,value:G.displayname})]}),(0,f.jsxs)(o.YR,{className:"mb-3",children:[(0,f.jsx)(o.wV,{children:"@"}),(0,f.jsx)(o.jO,{placeholder:"Email",name:"email",onChange:O,value:G.email,autoComplete:"email"})]}),(0,f.jsx)(o.YR,{xs:5,size:"xs",className:"mb-3",children:(0,f.jsx)(o.uz,{flush:!1,size:"xs",className:"mb-3",fullWidth:!0,children:(0,f.jsxs)(o.Ob,{itemKey:1,size:"xs",className:"mb-3",children:[(0,f.jsx)(o.Lv,{children:"Upload Image here"}),(0,f.jsxs)(o.qI,{children:[(0,f.jsx)("input",{name:"file",id:"file",type:"file",onChange:function(e){return R(e.target.files[0])}}),(0,f.jsx)("div",{className:"d-grid",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,f.jsx)(o.u5,{color:"success",style:{width:"100%"},onClick:function(e){e.preventDefault();try{if(""==a&&M(),""==!F){l.Z.post("http://localhost:3001/auth/updateImage",{file:F,userID:a},{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var s=e.data.message;"Upload Success"==s?((0,u.Z)("Message","UpdateProfile","handleUploadImage /assets/upDateImage","Upload selected Image \nFile : "+F.name+"userID : "+a,a),E("Upload image success"),z("green")):"Update Error"==s&&(0,u.Z)("Error","UpdateProfile","handleUploadImage /assets/upDateImage","Upload selected Image \nFile : "+F.name+"userID : "+a,a)})).catch((function(e){(0,u.Z)("Error","UpdateProfile","handleUploadImage /assets/upDateImage","Error in then/catch \n"+e.message,a)}))}else E("Select image to upload"),z("orange")}catch(s){(0,u.Z)("Error","UpdateProfile","handleUploadImage /assets/upDateImage","Error in try/catch \n"+s.message,a)}},children:"Update Logo"})})]})]})})})]})}),(0,f.jsx)(o.b7,{children:(0,f.jsx)(o.sl,{xs:6,children:(0,f.jsx)(o.YR,{size:"sm",className:"mb-3",children:(0,f.jsx)("div",{className:"formInput",children:(0,f.jsx)("img",{src:G.imgFile?s(16837)("./".concat(G.imgFile)):c,alt:"",style:{width:"80%",textAlign:"center",margin:"auto"}})})})})})]}),(0,f.jsx)(o.rb,{children:(0,f.jsx)(o.b7,{children:(0,f.jsx)("div",{className:"d-grid",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,f.jsx)(o.u5,{color:"success",style:{width:"200%"},type:"submit",children:"Save"})})})}),(0,f.jsx)("br",{})]})]})})})}}}]);
//# sourceMappingURL=4981.ed6e00c3.chunk.js.map