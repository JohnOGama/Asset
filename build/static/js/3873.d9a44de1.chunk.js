"use strict";(self.webpackChunkasset=self.webpackChunkasset||[]).push([[3873],{83873:function(e,t,s){s.r(t);var a=s(4942),r=s(29439),n=s(1413),l=s(45987),o=s(72791),c=s(31243),d=s(24750),i=s(66798),u=s(14693),m=s(97892),p=s.n(m),h=(s(29697),s(30948)),g=s(64554),f=s(94925),x=s(27391),y=s(68096),E=s(23786),b=s(64415),Z=s(65515),I=s(78983),j=s(57689),D=s(17746),A=s(44293),N=s(54970),v=s(80184),C=["onChange"],S=o.forwardRef((function(e,t){var s=e.onChange,a=(0,l.Z)(e,C);return(0,v.jsx)(h.h3,(0,n.Z)((0,n.Z)({},a),{},{getInputRef:t,onValueChange:function(t){s({target:{name:e.name,value:t.value}})},thousandSeparator:!0,valueIsNumericString:!0,prefix:"Php "}))}));t.default=function(){var e=(0,j.s0)(),t=(0,j.TH)().state,l="";try{l=t.params}catch(De){e("/dashboard")}var m=(0,o.useState)([]),h=(0,r.Z)(m,2),C=h[0],R=h[1],F=(0,o.useState)([]),w=(0,r.Z)(F,2),U=w[0],Y=w[1],z=(0,o.useState)([]),P=(0,r.Z)(z,2),T=P[0],W=P[1],k=(0,o.useState)({}),L=(0,r.Z)(k,2),M=(L[0],L[1],(0,o.useState)("")),H=(0,r.Z)(M,2),K=H[0],_=H[1],q=(0,o.useState)("red"),G=(0,r.Z)(q,2),O=G[0],V=G[1],B=(0,o.useState)(""),J=(0,r.Z)(B,2),Q=J[0],X=J[1],$="",ee="",te=(0,o.useState)(""),se=(0,r.Z)(te,2),ae=se[0],re=se[1],ne=(0,o.useState)(""),le=(0,r.Z)(ne,2),oe=le[0],ce=le[1],de=(0,o.useState)({assetID:"",assetcategID:"",supplierID:"",typeID:"",serialNo:"",assetCode:"",assetName:"",imgFile:"",description:"",amount:"",datePurchase:"",amountDepreciatedYr:"",dateDepreciated:""}),ie=(0,r.Z)(de,2),ue=ie[0],me=ie[1],pe=(0,o.useState)(""),he=(0,r.Z)(pe,2),ge=he[0],fe=he[1];(0,o.useEffect)((function(){}),[ae]),(0,o.useEffect)((function(){}),[oe]);var xe=(0,o.useState)({textmask:"(100) 000-0000",amountnumberformat:"",amountdepnumberformat:""}),ye=(0,r.Z)(xe,2),Ee=ye[0],be=ye[1];function Ze(){try{!function(){try{ee=(0,A.pe)(window.localStorage.getItem("Kgr67W@"),D.Z.secretkeylocal)}catch(De){(0,N.Z)("Error","AssetUser","CheckRole Local Storage is tampered",De.message,$),e("/dashboard")}}(),"Admin"==ee||"IT"==ee?null==!window.localStorage.getItem("id")||"0"!==window.localStorage.getItem("id")?$=(0,A.pe)(window.localStorage.getItem("id"),D.Z.secretkeylocal):e("/login"):e("/dashboard")}catch(De){e("/dashboard")}}function Ie(e){me((0,n.Z)((0,n.Z)({},ue),{},(0,a.Z)({},e.target.name,e.target.value))),console.log(window.location.origin)}(0,o.useEffect)((function(){Ze()}),[]),(0,o.useEffect)((function(){!function(){try{""==$&&Ze();var e="http://localhost:3001/assets/getassetsbyID";c.Z.post(e,{rowId:l},{headers:{"Content-Type":"application/json"}}).then((function(e){var t=e.data.message;"Record Found"==t?(me((0,n.Z)((0,n.Z)({},ue),{},{assetID:e.data.result[0].assetID,assetcategID:e.data.result[0].assetCategID,supplierID:e.data.result[0].supplierid,serialNo:e.data.result[0].serialNo,typeID:e.data.result[0].typeID,assetCode:e.data.result[0].assetCode,imgFile:e.data.result[0].pictureFile,assetName:e.data.result[0].assetName,description:e.data.result[0].description,amount:e.data.result[0].amount,datePurchase:e.data.result[0].datePurchase,amountDepreciatedYr:e.data.result[0].amountDepreciatedYr,dateDepreciated:e.data.result[0].dateDepreciated})),re(e.data.result[0].datePurchase),ce(e.data.result[0].dateDepreciated),Ee.amountnumberformat=e.data.result[0].amount,Ee.amountdepnumberformat=e.data.result[0].amountDepreciatedYr):"No Record Found"==t&&(0,N.Z)("Error","AssetEdit","LoadData /assets/getassetsbyID","No Record Found "+e.data.message2,$)})).catch((function(e){(0,N.Z)("Error","AssetEdit","LoadData /assets/getassetsbyID","Error in then/catch \n"+e.message,$)}))}catch(De){(0,N.Z)("Error","AssetEdit","LoadData /assets/getassetsbyID","Error in try/catch \n"+De.message,$)}}(),function(){try{""==$&&Ze();var e="http://localhost:3001/type/getAssetType";c.Z.post(e).then((function(e){var t=e.data.message;"Record Found"==t?W(e.data.result):"No Record Found"==t&&(0,N.Z)("Error","AssetEdit","LoadAssetType /type/getAssetType",e.data.message2,$)})).catch((function(e){(0,N.Z)("Error","AssetEdit","LoadAssetType /type/getAssetType","Error in then/catch \n"+e.message,$)}))}catch(De){(0,N.Z)("Error","AssetEdit","LoadAssetType /type/getAssetType","Error in try/catch \n"+De.message,$)}}()}),[]),(0,o.useEffect)((function(){try{""==$&&Ze();c.Z.post("http://localhost:3001/category/getAssetCategory").then((function(e){var t=e.data.message;"Record Found"==t?R(e.data.result):"No Record Found"==t&&(0,N.Z)("Error","AssetEdit","useEffect /category/getAssetCategory",e.data.message2,$)})).catch((function(e){(0,N.Z)("Error","AssetEdit","useEffect /category/getAssetCategory","Error in then/catch \n"+e.message,$)}))}catch(De){(0,N.Z)("Error","AssetEdit","useEffect /category/getAssetCategory","Error in try/catch \n"+De.message,$)}}),[]),(0,o.useEffect)((function(){try{""==$&&Ze();c.Z.post("http://localhost:3001/supplier/getsupplier").then((function(e){var t=e.data.message;"Record Found"==t?Y(e.data.result):"No Record Found"==t&&(0,N.Z)("Error","AssetEdit","useEffect /supplier/getsupplier",e.data.message2,$)})).catch((function(e){(0,N.Z)("Error","AssetEdit","useEffect /supplier/getsupplier","Error in then/catch \n"+e.message,$)}))}catch(De){(0,N.Z)("Error","AssetEdit","useEffect /supplier/getsupplier","Error in try/catch \n"+De.message,$)}}),[]),(0,o.useEffect)((function(){try{""==$&&Ze();c.Z.post("http://localhost:3001/assets/getAssetStatus").then((function(e){var t=e.data.message;"Record Found"==t?X(e.data.result[0].assetStatusID):"No Record Found"==t&&(0,N.Z)("Error","AssetEdit","useEffect /assets/getAssetStatus",e.data.message2,$)})).catch((function(e){(0,N.Z)("Error","AssetEdit","useEffect /assets/getAssetStatus","Error in then/catch \n"+e.message,$)}))}catch(De){(0,N.Z)("Error","AssetEdit","useEffect /assets/getAssetStatus","Error in try/catch \n"+De.message,$)}}),[]);var je=function(e){be((0,n.Z)((0,n.Z)({},Ee),{},(0,a.Z)({},e.target.name,e.target.value)))};return(0,v.jsx)(I.b7,{xs:12,children:(0,v.jsxs)(I.xH,{className:"mb-3",children:[(0,v.jsx)(I.bn,{children:(0,v.jsxs)("h6",{children:[(0,v.jsxs)("span",{className:"message",style:{color:"#5da4f5"},children:[" ",(0,v.jsx)(v.Fragment,{children:" Update Asset "})]}),(0,v.jsx)("br",{}),(0,v.jsxs)("strong",{children:[(0,v.jsx)("span",{className:"message",style:{color:O},children:(0,v.jsx)("p",{children:K})})," "]})]})}),(0,v.jsxs)(I.lx,{onSubmit:function(e){try{""==$&&Ze(),e.preventDefault();var t=ue.assetcategID,s=ue.supplierID,a=ue.serialNo,r=ue.assetCode,n=ue.assetName,o=ue.description,d=Ee.amountnumberformat,i=Ee.amountdepnumberformat,u=ue.typeID;if(console.log("What valss : "+d),""==!Q&&""==!t&&""==!s&&""==!a&&""==!r&&""==!n&&""==!o&&""==!d&&""==!i&&""==!ae&&""==!oe&&""==!u){c.Z.post("http://localhost:3001/assets/updateassets",{rowId:l,assetStat:Q,assetcategID:t,supplierid:s,serialno:a,assetcode:r,assetname:n,description:o,amount:d,amountdepreciated:i,datePurchase:ae,dateDepreciated:oe,typeID:u,userID:$}).then((function(e){var t=e.data.message;"Update Success"==t?(V("Green"),_("Update Success"),(0,N.Z)("Message","AssetEdit","handleSubmit /assets/updateassets","Update Asset Information \nAssetID : "+l+"\n Code : "+r+"\n Name : "+n+"\n .....\n Updated by : "+$,$),_("Asset updated successfully"),V("green")):"Update Error"==t&&((0,N.Z)("Error","AssetEdit","handleSubmit /assets/updateassets",e.data.message2,$),_("Asset not updated successfully"),V("red"))})).catch((function(e){(0,N.Z)("Error","AssetEdit","handleSubmit /assets/updateassets","Error in then/catch \n"+e.message,$)}))}else _(" All Fields must not be Empty"),V("orange")}catch(De){(0,N.Z)("Error","AssetEdit","handleSubmit","Error in try/catch \n"+De.message,$)}},children:[(0,v.jsxs)(I.rb,{children:[(0,v.jsx)(I.b7,{children:(0,v.jsxs)(I.sl,{children:[(0,v.jsxs)(y.Z,{fullWidth:!0,xs:6,children:[(0,v.jsx)(f.Z,{id:"demo-simple-select-label",children:"Supplier"}),(0,v.jsx)(b.Z,{className:"mb-3","aria-label":"Small select example",name:"supplierID",onChange:Ie,value:ue.supplierID,label:"Supplier",error:!ue.supplierID,children:U.map((function(e){return(0,v.jsx)(E.Z,{value:e.supplierid,children:e.name},e.supplierid)}))})]}),(0,v.jsxs)(y.Z,{fullWidth:!0,children:[(0,v.jsx)(f.Z,{id:"assetcategID",children:"Asset Category"}),(0,v.jsx)(b.Z,{className:"mb-3","aria-label":"Small select example",name:"assetcategID",onChange:Ie,value:ue.assetcategID,label:"Asset Category",error:!ue.assetcategID,children:C.map((function(e){return(0,v.jsx)(E.Z,{value:e.assetCategID,children:e.assetCategName},e.assetCategID)}))})]}),(0,v.jsxs)(y.Z,{fullWidth:!0,xs:6,children:[(0,v.jsx)(f.Z,{id:"typeID",children:"Asset Type"}),(0,v.jsx)(b.Z,{className:"mb-3","aria-label":"Small select example",name:"typeID",onChange:Ie,value:ue.typeID,error:!ue.typeID,label:"Asseet Type",children:T.map((function(e){return(0,v.jsx)(E.Z,{value:e.typeID,children:e.name},e.typeID)}))})]}),(0,v.jsx)(I.YR,{size:"sm",className:"mb-3",children:(0,v.jsx)(x.Z,{onChange:Ie,value:ue.serialNo,name:"serialNo",error:!ue.serialNo,id:"outlined-textarea",fullWidth:!0,label:"SerialNo",placeholder:"Notes",editable:!0})}),(0,v.jsx)(I.YR,{size:"sm",className:"mb-3",children:(0,v.jsx)(x.Z,{onChange:Ie,name:"assetCode",value:ue.assetCode,id:"outlined-textarea",error:!ue.assetCode,fullWidth:!0,label:"Asset Code",placeholder:"Notes"})}),(0,v.jsx)(I.YR,{size:"sm",className:"mb-3",children:(0,v.jsx)(x.Z,{onChange:Ie,name:"assetName",value:ue.assetName,error:!ue.assetName,id:"outlined-textarea",fullWidth:!0,label:"Asset Name",placeholder:"Notes"})}),(0,v.jsx)(I.YR,{size:"sm",className:"mb-3",children:(0,v.jsx)(x.Z,{onChange:Ie,name:"description",value:ue.description,error:!ue.description,id:"outlined-textarea",fullWidth:!0,label:"Description",placeholder:"Notes",multiline:!0,rows:3})})]})}),(0,v.jsx)(I.b7,{children:(0,v.jsxs)(I.sl,{children:[(0,v.jsx)(I.YR,{size:"sm",className:"mb-3",children:(0,v.jsx)(i._,{dateAdapter:d.y,children:(0,v.jsx)(u.M,{name:"datePurchase",label:"Date Purchase",fullWidth:!0,true:!0,value:p()(ue.datePurchase),onChange:function(e){return re(e)},error:!ue.datePurchase})})}),(0,v.jsx)(I.YR,{size:"sm",className:"mb-3",children:(0,v.jsx)(g.Z,{sx:{"& > :not(style)":{m:1}},children:(0,v.jsx)(x.Z,{label:"Amount Purchase",error:!Ee.amountnumberformat,value:ue.amount,onChange:je,name:"amountnumberformat",id:"formatted-numberformat-input",InputProps:{inputComponent:S},variant:"standard"})})}),(0,v.jsx)(I.YR,{size:"sm",className:"mb-3",children:(0,v.jsx)(i._,{dateAdapter:d.y,children:(0,v.jsx)(u.M,{name:"dateDepreciated",label:"Date Depreciated",fullWidth:!0,true:!0,error:!ue.dateDepreciated,value:p()(ue.dateDepreciated),onChange:function(e){return ce(e)}})})}),(0,v.jsx)(I.YR,{size:"sm",className:"mb-3",children:(0,v.jsx)(x.Z,{label:"Amount Depreciated per YR",value:ue.amountDepreciatedYr,onChange:je,name:"amountdepnumberformat",id:"formatted-numberformat-input",InputProps:{inputComponent:S},error:!Ee.amountdepnumberformat,variant:"standard"})}),(0,v.jsx)(I.YR,{size:"sm",className:"mb-3",children:(0,v.jsx)(I.uz,{flush:!1,size:"xs",className:"mb-3",fullWidth:!0,children:(0,v.jsxs)(I.Ob,{itemKey:1,size:"xs",className:"mb-3",children:[(0,v.jsx)(I.Lv,{children:"Upload Image here"}),(0,v.jsxs)(I.qI,{children:[(0,v.jsx)("input",{name:"file",id:"file",type:"file",onChange:function(e){return fe(e.target.files[0])}}),(0,v.jsx)("div",{className:"d-grid",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,v.jsx)(I.u5,{color:"success",style:{width:"100%"},onClick:function(e){e.preventDefault();try{if(""==$&&Ze(),""==!ge){var t=ue.assetID;c.Z.post("http://localhost:3001/assets/upDateImage",{file:ge,assetID:t},{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var s=e.data.message;console.log(s),"Upload Success"==s?((0,N.Z)("Message","AssetEdit","handleUploadImage /assets/upDateImage","Upload selected Image \nFile : "+ge.name+"AssetID : "+t,$),_("Upload Image successfully"),V("green")):"Upload Error"==s&&((0,N.Z)("Error","AssetEdit","handleUploadImage /assets/upDateImage","Upload selected Image \nFile : "+ge.name+"AssetID : "+t,$),_("Upload Image not succesful"),V("red"))})).catch((function(e){(0,N.Z)("Error","AssetEdit","handleUploadImage /assets/upDateImage","Error in then/catch \n"+e.message,$)}))}else _("Select image to upload"),V("orange")}catch(De){(0,N.Z)("Error","AssetEdit","handleUploadImage /assets/upDateImage","Error in try/catch \n"+De.message,$)}},children:"Update Logo"})})]})]})})})]})}),(0,v.jsx)(I.b7,{children:(0,v.jsx)(I.rb,{children:(0,v.jsx)(I.b7,{children:(0,v.jsx)(I.sl,{xs:6,children:(0,v.jsx)(I.YR,{size:"sm",className:"mb-3",children:(0,v.jsx)("div",{className:"formInput",children:(0,v.jsx)("img",{src:ue.imgFile?s(16837)("./".concat(ue.imgFile)):Z,alt:"",style:{width:"80%",textAlign:"center",margin:"auto"}})})})})})})})]}),(0,v.jsx)(I.rb,{children:(0,v.jsx)(I.b7,{children:(0,v.jsx)("div",{className:"d-grid",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,v.jsx)(I.u5,{color:"success",style:{width:"200%"},type:"submit",children:"Save"})})})}),(0,v.jsx)("br",{})]})]})})}},65515:function(e,t,s){e.exports=s.p+"static/media/DefaultAsset.f90524359a4aba5c898b.png"}}]);
//# sourceMappingURL=3873.d9a44de1.chunk.js.map