(self.webpackChunkasset=self.webpackChunkasset||[]).push([[1767],{1767:function(e,t,n){"use strict";n.r(t);var r=n(1413),a=n(29439),o=n(72791),s=n(31243),c=n(15493),i=n(31675),l=n(8845),u=n(57689),d=n(17746),f=n(44293),h=n(54970),p=n(78983),m=n(24518),g=n(5574),Z=n(97123),x=n(39157),w=n(51691),j=n(65661),v=n(35527),D=n(59962),b=n.n(D),k=n(80184);t.default=function(){var e=(0,u.s0)(),t="",n="",D=(0,o.useState)(""),y=(0,a.Z)(D,2),E=y[0],N=y[1],C=(0,o.useState)("red"),S=(0,a.Z)(C,2),V=S[0],M=S[1],z=(0,o.useState)([]),I=(0,a.Z)(z,2),R=I[0],F=I[1],_=o.useState(!1),P=(0,a.Z)(_,2),T=P[0],H=P[1],L=(0,o.useState)(""),O=(0,a.Z)(L,2),A=O[0],W=O[1];function Y(){try{!function(){try{n=(0,f.pe)(window.localStorage.getItem("Kgr67W@"),d.Z.secretkeylocal)}catch(r){(0,h.Z)("Error","DepartmentView","CheckRole Local Storage is tampered",r.message,t),e("/dashboard")}}(),"Admin"==n||"IT"==n?null==!window.localStorage.getItem("id")||"0"!==window.localStorage.getItem("id")?t=(0,f.pe)(window.localStorage.getItem("id"),d.Z.secretkeylocal):e("/login"):e("/dashboard")}catch(r){e("/dashboard")}}(0,o.useEffect)((function(){Y()}),[]);var q=o.useMemo((function(){return[{field:"id",headerName:"Actions",type:"actions",disableClickEventBubbling:!0,renderCell:function(t){return(0,k.jsxs)("div",{children:[(0,k.jsx)(i.Z,{cursor:"pointer",onClick:function(){return function(t){e("/configurations/department",{state:{params:t}})}(t.row.id)}}),(0,k.jsx)(l.Z,{cursor:"pointer",onClick:function(){return B(t.row.id)}})]})}},{field:"departmentName",headerName:"Status Name",width:200,editable:!1},{field:"description",headerName:"Description",width:300,editable:!1}]}),[]);(0,o.useEffect)((function(){}),[A]);var B=function(e){N(""),function(e){try{""==t&&Y();var n=e,r="http://localhost:3001/department/checkDepartmentfordelete";s.Z.post(r,{rowId:n}).then((function(e){var t=e.data.message;"Record Found"==t?(N("Department selected still in use"),M("red"),H(!1)):"No Record Found"==t&&H(!1)})).catch((function(e){(0,h.Z)("Error","DepartmentView","checkDepartment /assets/checkDepartmentfordelete",e.message,t),N("Error in checking Department "),M("red")}))}catch(a){(0,h.Z)("Error","DepartmentView","checkDepartment /assets/checkDepartmentfordelete","Error in try/catch \n"+a.message,t)}}(e),W(e)},G=function(){H(!1),N("")};function K(){""==t&&Y();s.Z.post("http://localhost:3001/department/viewalldepartment").then((function(e){var n=e.data.message;"Record Found"==n?F(e.data.result):"No Record Found"==n&&(N("No Record Found"),M("red"),(0,h.Z)("Error","DepartmentView","handleDelete /assets/viewalldepartment",n,t))})).catch((function(e){(0,h.Z)("Error","DepartmentView","handleDelete /assets/viewalldepartment",e.message,t)}))}return(0,o.useEffect)((function(){K()}),[]),(0,k.jsx)(p.b7,{xs:12,children:(0,k.jsxs)(p.xH,{className:"mb-3",size:"sm",children:[(0,k.jsx)(p.bn,{children:(0,k.jsxs)("h6",{children:[(0,k.jsxs)("span",{className:"message",style:{color:"#5da4f5"},children:[" ",(0,k.jsx)(k.Fragment,{children:" Department "})]}),(0,k.jsx)("br",{}),(0,k.jsxs)("strong",{children:[(0,k.jsx)("span",{className:"message",style:{color:V},children:(0,k.jsx)("p",{children:E})})," "]})]})}),(0,k.jsx)(p.lx,{children:(0,k.jsx)(p.rb,{children:(0,k.jsx)(p.b7,{xs:12,children:(0,k.jsxs)(p.sl,{children:[(0,k.jsx)(p.u5,{className:"text-right",onClick:function(t){e("/configurations/department",{state:{params:""}})},children:"Create New "}),(0,k.jsx)(p.YR,{size:"sm",className:"mb-3",children:(0,k.jsx)("div",{style:{height:400,width:"100%"},children:(0,k.jsx)(c._$,{rows:R,columns:q,initialState:{pagination:{paginationModel:{pageSize:10}}},pageSizeOptions:[10],rowSelection:!0,getRowId:function(e){return e.id}})})}),(0,k.jsx)("div",{className:"d-grid",children:(0,k.jsxs)(g.Z,{open:T,onClose:G,PaperComponent:function(e){return(0,k.jsx)(b(),{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:(0,k.jsx)(v.Z,(0,r.Z)({},e))})},"aria-labelledby":"draggable-dialog-title",children:[(0,k.jsx)(j.Z,{style:{cursor:"move"},id:"draggable-dialog-title",children:"Status"}),(0,k.jsx)(x.Z,{children:(0,k.jsx)(w.Z,{children:"Are you sure you want to Delete ?"})}),(0,k.jsxs)(Z.Z,{children:[(0,k.jsx)(m.Z,{autoFocus:!0,onClick:G,children:"No"}),(0,k.jsx)(m.Z,{onClick:function(){try{""==t&&Y();var e=A;s.Z.post("http://localhost:3001/department/deleteDepartment",{rowId:e}).then((function(e){var n=e.data.message;"Record Deleted"==n?(H(!1),K()):"No Record Deleted"==n&&((0,h.Z)("Error","DepartmentView","handleDelete /assets/deleteDepartment",e.data.message2,t),N("No record deleted"),M("red"))})).catch((function(e){(0,h.Z)("Error","DepartmentView","handleDelete /assets/deleteDepartment",e.message,t)}))}catch(n){(0,h.Z)("Error","DepartmentView","handleDelete /assets/deleteDepartment","Error in try/catch \n"+n.message,t)}},children:"Yes"})]})]})})]})})})})]})})}},8845:function(e,t,n){"use strict";var r=n(64836);t.Z=void 0;var a=r(n(45649)),o=n(80184),s=(0,a.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5-1-1h-5l-1 1H5v2h14V4h-3.5z"}),"DeleteOutlineTwoTone");t.Z=s},31675:function(e,t,n){"use strict";var r=n(64836);t.Z=void 0;var a=r(n(45649)),o=n(80184),s=(0,a.default)([(0,o.jsx)("path",{d:"M5 18.08V19h.92l9.06-9.06-.92-.92z",opacity:".3"},"0"),(0,o.jsx)("path",{d:"M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29s-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83zM3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM5.92 19H5v-.92l9.06-9.06.92.92L5.92 19z"},"1")],"EditTwoTone");t.Z=s},45649:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(54421)},54421:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return a.Z},createChainedFunction:function(){return o},createSvgIcon:function(){return s.Z},debounce:function(){return c.Z},deprecatedPropType:function(){return i},isMuiElement:function(){return l.Z},ownerDocument:function(){return u.Z},ownerWindow:function(){return d.Z},requirePropFactory:function(){return f},setRef:function(){return h},unstable_ClassNameGenerator:function(){return v},unstable_useEnhancedEffect:function(){return p.Z},unstable_useId:function(){return m.Z},unsupportedProp:function(){return g},useControlled:function(){return Z.Z},useEventCallback:function(){return x.Z},useForkRef:function(){return w.Z},useIsFocusVisible:function(){return j.Z}});var r=n(55902),a=n(14036),o=n(78949).Z,s=n(76189),c=n(83199);var i=function(e,t){return function(){return null}},l=n(19103),u=n(98301),d=n(17602);n(87462);var f=function(e,t){return function(){return null}},h=n(62971).Z,p=n(40162),m=n(67384);var g=function(e,t,n,r,a){return null},Z=n(98278),x=n(89683),w=n(42071),j=n(23031),v={configure:function(e){r.Z.configure(e)}}},64836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);
//# sourceMappingURL=1767.757c5734.chunk.js.map