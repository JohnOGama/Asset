{"version":3,"file":"static/js/928.8d2d9584.chunk.js","mappings":"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","sources":["views/configurations/usercategory/UserCategory.js"],"sourcesContent":["\nimport  { useEffect, useState } from 'react'\nimport axios from 'axios'\nimport * as React from 'react'\n\nimport {\n    CCard,\n    CCardBody,\n    CCardHeader,\n    CCol,\n    CRow,\n    CForm,\n    CButton,\n    //CFormSelect,\n    //CFormInput,\n   // CInputGroupText,\n    CInputGroup,\n   // CFormLabel,\n  //  CFormFloating,\n  //  CLink,\n  } from '@coreui/react'\n\n  import TextField from '@mui/material/TextField';\n\nimport {useNavigate} from 'react-router-dom';\nimport {useLocation} from 'react-router-dom';\n\nimport appSettings from 'src/AppSettings' // read the app config\nimport { decrypt } from 'n-krypta';\n// encrypt,compare\nimport WriteLog from 'src/components/logs/LogListener';\n\nfunction UserCategory() {\n\n  const navigate = useNavigate();\n  const {state} = useLocation();\n  let rowId = \"\"\n  \n  try {\n     rowId = state.params;\n  }\n  catch(err){\n   navigate('/dashboard')\n  }\n \n  var userID = \"\"\n  var userRole = \"\"\n  //const [success,SetSuccess] = useState(\"\");\n  //const [errors,setErrors] = useState({})\n  const [message,setMessage] = useState(\"\")\n  const [colorMessage,setColorMessage] = useState('red')\n\n  const [values,setValues] = useState({\n    assetid: \"\",\n    name: \"\",\n    description: \"\"\n  })\n\n  function CheckRole() {\n    try {\n\n      userRole = decrypt(window.localStorage.getItem('Kgr67W@'), appSettings.secretkeylocal)\n\n    }\n    catch(err) {\n      WriteLog(\"Error\",\"UserCategory\",\"CheckRole Local Storage is tampered\", err.message,userID)\n      navigate('/dashboard')\n    }\n  }\n\n\nfunction getUserInfo() {\n\n  try {\n    CheckRole()\n      if (userRole == \"Admin\" || userRole == \"IT\")\n        {\n            if((!window.localStorage.getItem('id') == null) || (window.localStorage.getItem('id') !== \"0\")) {\n              userID = decrypt(window.localStorage.getItem('id'), appSettings.secretkeylocal)\n            \n            }else{ \n              navigate('/login')\n          }\n        }\n      else {\n        navigate('/dashboard')\n      }\n        \n      }\n  catch(err) {\n    navigate('/dashboard')\n    }\n}\n    useEffect(() => {\n      \n  getUserInfo()\n      }, [])\n      \n\n    useEffect(() => {\n     if(userID == \"\") \n  {\n    getUserInfo()\n  }\n      if(!rowId == \"\") {\n      const url = 'http://localhost:3001/usercategory/getuserCategorybyID'\n      axios.post(url,{rowId})\n      .then(res => {\n        const dataResponse = res.data.message;\n        if(dataResponse == \"Record Found\") {\n         \n          setValues(\n            {...values,assetid: res.data.result[0].categoryID,\n              name: res.data.result[0].categoryName,\n              description: res.data.result[0].categoryDesc\n            });\n\n        } else if (dataResponse == \"No Record Found\") {\n          setMessage(dataResponse)\n          setColorMessage('red')\n          WriteLog(\"Error\",\"UserCategory\",\"useEffect /usercategory/getuserCategorybyID\",res.data.message,userID)\n          //navigate('/500');\n        }\n      }).catch(err => {\n        WriteLog(\"Error\",\"UserCategory\",\"useEffect /usercategory/getuserCategorybyID\",\" Error in try/catch \\n\" + err.message,userID)\n       \n      })\n    }\n    },[])\n\n\n    function handleInput(event){\n     \n      setValues({...values,[event.target.name]: event.target.value})\n\n    }\n\n\n    function handleSubmit(event) {\n        try {\n    \n          event.preventDefault();\n          \n  if(userID == \"\") \n  {\n    getUserInfo()\n  }\n          const name = values.name;\n          const description = values.description;\n\n          if((!name == \"\") && \n            (!description == \"\")) {\n\n              if (rowId == \"\") {\n\n              const url = 'http://localhost:3001/usercategory/putuserCategory'\n              axios.post(url,{name,description,userID})\n              .then(res => {  \n                  const dataResponse = res.data.message \n                  if(dataResponse == \"Insert Success\"){ \n                    \n                  WriteLog(\"Message\",\"UserCategory\",\"handleSubmit /usercategory/putuserCategory\", \n                  \" New Category \"\n                  + \"\\n Name: \" + name \n                  + \"\\n Desc  :  \" + description \n                  + \"\\n User : \" + userID ,userID)\n                    navigate('/configurations/usercategoryview')\n                  } else if(dataResponse == \"Insert Error\") {\n                    WriteLog(\"Error\",\"UserCategory\",\"handleSubmit /usercategory/putuserCategory\",res.data.message ,userID)\n                    setMessage(dataResponse)\n                    setColorMessage(\"red\")  \n                    //navigate('/500');\n                  } \n              })\n              .catch(err => {\n                WriteLog(\"Error\",\"UserCategory\",\"handleSubmit /usercategory/putuserCategory\",\"Error in then/catch \\n\" + err.message ,userID)\n                navigate('/500');\n              })\n              \n            }\n            else {\n              /// update here\n\n              const url = 'http://localhost:3001/usercategory/updateuserCategory'\n              axios.post(url,{name,description,userID,rowId})\n              .then(res => {  \n                  const dataResponse = res.data.message \n                  if(dataResponse == \"Update Success\"){ \n                    WriteLog(\"Message\",\"UserAssetCategory\",\"handleSubmit /usercategory/updateuserCategory\", \n                    \" New Category \"\n                    + \"\\n AssetID : \" + rowId\n                    + \"\\n Name: \" + name \n                    + \"\\n Desc  :  \" + description \n                    + \"\\n User : \" + userID ,userID)\n                    navigate('/configurations/usercategoryview')\n                  } else if(dataResponse == \"Update Error\") {\n                    WriteLog(\"Error\",\"UserAssetCategory\",\"handleSubmit /usercategory/updateuserCategory\",res.data.message ,userID)\n                    setMessage(dataResponse)\n                    setColorMessage(\"red\")  \n                    //navigate('/500');\n                  } \n              })\n              .catch(err => {\n                WriteLog(\"Error\",\"UserAssetCategory\",\"handleSubmit /usercategory/updateuserCategory\", \"Error in then/catch \\n\" + err.message,userID)\n                navigate('/500');\n              })\n\n            }\n          }\n          else\n          {\n            setMessage(\"All fields must not be emtpy\")\n            setColorMessage(\"red\")  \n          }\n        }\n        catch(err) {\n          WriteLog(\"Error\",\"AssetCategory\",\"handleSubmit\",\" Error in try/catch\",userID)\n        }\n    }\n\n  return (\n\n    <CCol xs={12}>\n         <CCard className=\"mb-3\" size=\"sm\"  >\n         <CCardHeader>\n            <h6>\n              <span className=\"message\" style={{ color: '#5da4f5'}}> <> User Category </></span> \n              <br></br>\n              <strong><span className=\"message\" style={{ color: colorMessage}}><p>{message}</p></span> </strong>\n            </h6>\n          </CCardHeader>\n          <CForm onSubmit={handleSubmit}>\n            <CRow >\n                <CCol >\n                    <CCardBody>\n                      <CInputGroup size=\"sm\" className=\"mb-3\" >\n                          <TextField onChange={e => handleInput(e)} name=\"name\" id=\"outlined-textarea\"\n                            value={values.name} fullWidth label=\"Category Name\" placeholder=\"Notes\" />\n                      </CInputGroup>\n                      <CInputGroup size=\"sm\" className=\"mb-3\" >\n                          <TextField onChange={handleInput} name=\"description\" id=\"outlined-textarea\" \n                              value={values.description} fullWidth label=\"Description\" placeholder=\"Description\" \n                              multiline  rows={5}  />\n                      </CInputGroup>\n                    </CCardBody>\n                </CCol>\n                <CCol>\n\n                </CCol>\n                <div className=\"d-grid\" style={{\n                            \n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                          \n                            }}>\n                  <CButton style={{  margin:'5px', width: '120%' }}  color=\"success\" type='submit'>Save</CButton>\n                </div>\n            </CRow>\n          </CForm>\n         </CCard>\n    </CCol>\n  )\n}\n\nexport default UserCategory\n"],"names":["navigate","useNavigate","state","useLocation","rowId","params","err","userID","userRole","_useState","useState","_useState2","_slicedToArray","message","setMessage","_useState3","_useState4","colorMessage","setColorMessage","_useState5","assetid","name","description","_useState6","values","setValues","getUserInfo","decrypt","window","localStorage","getItem","appSettings","secretkeylocal","WriteLog","CheckRole","handleInput","event","_objectSpread","_defineProperty","target","value","useEffect","axios","post","then","res","dataResponse","data","result","categoryID","categoryName","categoryDesc","catch","_jsx","CCol","xs","children","_jsxs","CCard","className","size","CCardHeader","style","color","_Fragment","CForm","onSubmit","preventDefault","CRow","CCardBody","CInputGroup","TextField","onChange","e","id","fullWidth","label","placeholder","multiline","rows","display","alignItems","justifyContent","CButton","margin","width","type"],"sourceRoot":""}