"use strict";(self.webpackChunkasset=self.webpackChunkasset||[]).push([[8642],{8642:function(e,t,a){a.r(t);var r=a(4942),n=a(1413),s=a(29439),c=a(72791),d=a(31243),i=a(78983),m=a(27391),o=a(57689),l=a(17746),p=a(44293),u=a(54970),h=a(80184);t.default=function(){var e=(0,o.s0)(),t=(0,o.TH)().state,a="";try{a=t.params}catch(U){e("/dashboard")}var g="",D="",f=(0,c.useState)(""),b=(0,s.Z)(f,2),x=b[0],Z=b[1],j=(0,c.useState)("red"),S=(0,s.Z)(j,2),y=S[0],E=S[1],I=(0,c.useState)({departmentid:"",name:"",description:""}),w=(0,s.Z)(I,2),v=w[0],N=w[1];function k(){try{!function(){try{D=(0,p.pe)(window.localStorage.getItem("Kgr67W@"),l.Z.secretkeylocal)}catch(U){(0,u.Z)("Error","Department","CheckRole Local Storage is tampered",U.message,g),e("/dashboard")}}(),"Admin"==D||"IT"==D?null==!window.localStorage.getItem("id")||"0"!==window.localStorage.getItem("id")?g=(0,p.pe)(window.localStorage.getItem("id"),l.Z.secretkeylocal):e("/login"):e("/dashboard")}catch(U){e("/dashboard")}}function C(e){N((0,n.Z)((0,n.Z)({},v),{},(0,r.Z)({},e.target.name,e.target.value)))}return(0,c.useEffect)((function(){k()}),[]),(0,c.useEffect)((function(){try{if(""==g&&k(),""==!a){d.Z.post("http://localhost:3001/department/getDepartmentID",{rowId:a}).then((function(e){var t=e.data.message;"Record Found"==t?N((0,n.Z)((0,n.Z)({},v),{},{departmentid:e.data.result[0].departmentDisplayID,name:e.data.result[0].departmentName,description:e.data.result[0].description})):"No Record Found"==t&&(0,u.Z)("Error","Department","useEffect /department/getDepartmentID",e.data.message2,g)})).catch((function(e){(0,u.Z)("Error","Department","useEffect /department/getDepartmentID","then/catch \n"+e.message,g)}))}}catch(U){(0,u.Z)("Error","Department","useEffect /department/getDepartmentID","try/catch \n"+U.message,g)}}),[]),(0,h.jsx)(i.b7,{xs:12,children:(0,h.jsxs)(i.xH,{className:"mb-3",size:"sm",children:[(0,h.jsx)(i.bn,{children:(0,h.jsxs)("h6",{children:[(0,h.jsxs)("span",{className:"message",style:{color:"#5da4f5"},children:[" ",(0,h.jsx)(h.Fragment,{children:" Department "})]}),(0,h.jsx)("br",{}),(0,h.jsxs)("strong",{children:[(0,h.jsx)("span",{className:"message",style:{color:y},children:(0,h.jsx)("p",{children:x})})," "]})]})}),(0,h.jsxs)(i.lx,{onSubmit:function(t){try{""==r&&k(),t.preventDefault();var r=(0,p.pe)(localStorage.getItem("id"),l.Z.secretkeylocal),n=v.name,s=v.description;if(""==!n&&""==!s)if(""==a){d.Z.post("http://localhost:3001/department/putDepartment",{name:n,description:s,userID:r}).then((function(t){var a=t.data.message;"Insert Success"==a?((0,u.Z)("Message","AssetStatus","handleSubmit /department/putDepartment"," New Department \n Name: "+n+"\n Desc  :  "+s+"\n User : "+r,r),e("/configurations/departmentview")):"Insert Error"==a&&((0,u.Z)("Error","Department","handleSubmit /department/putDepartment",t.data.message2,r),Z("Error in Inserting new Department"),E("red"))})).catch((function(e){(0,u.Z)("Error","Department","handleSubmit /department/putDepartment",e.message,r)}))}else{d.Z.post("http://localhost:3001/department/updateDepartment",{name:n,description:s,userID:r,rowId:a}).then((function(t){var c=t.data.message;"Update Success"==c?((0,u.Z)("Message","AssetStatus","handleSubmit /department/updateDepartment"," Update Department  AssetID : "+a+"\n Name: "+n+"\n Desc  :  "+s+"\n User : "+r,r),e("/configurations/departmentview")):"Update Error"==c&&((0,u.Z)("Error","Department","handleSubmit /department/updateDepartment",t.data.message2,r),Z("Error in Updating Department"),E("red"))})).catch((function(e){(0,u.Z)("Error","Department","handleSubmit /department/updateDepartment","Error in try/catch "+e.message,r)}))}else Z("All fields must not be emtpy"),E("red")}catch(U){(0,u.Z)("Error","Department","handleSubmit","Error in try/catch "+U.message,g)}},children:[(0,h.jsxs)(i.rb,{children:[(0,h.jsx)(i.b7,{children:(0,h.jsxs)(i.sl,{children:[(0,h.jsx)(i.YR,{size:"sm",className:"mb-3",children:(0,h.jsx)(m.Z,{onChange:function(e){return C(e)},name:"name",id:"outlined-textarea",value:v.name,fullWidth:!0,label:"Department Name",placeholder:"Department Name"})}),(0,h.jsx)(i.YR,{size:"sm",className:"mb-3",children:(0,h.jsx)(m.Z,{onChange:C,name:"description",id:"outlined-textarea",value:v.description,fullWidth:!0,label:"Description",placeholder:"Description",multiline:!0,rows:5})})]})}),(0,h.jsx)(i.b7,{})]}),(0,h.jsx)("div",{className:"d-grid",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,h.jsx)(i.u5,{style:{width:"150%"},color:"success",type:"submit",children:"Save"})})]})]})})}}}]);
//# sourceMappingURL=8642.08ff10ba.chunk.js.map