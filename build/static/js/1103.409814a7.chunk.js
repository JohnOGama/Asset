"use strict";(self.webpackChunkasset=self.webpackChunkasset||[]).push([[1103],{55680:function(e,s){s.Z=function(){var e=new Date,s=e.getFullYear(),t=e.getMonth()+1,i=e.getDate();return e.getHours(),e.getMinutes(),e.getSeconds(),t+"/"+i+"/"+s}},51103:function(e,s,t){t.r(s);var i=t(1413),r=t(29439),a=t(72791),o=t(31243),n=t(15493),c=t(24518),d=t(5574),l=t(97123),p=t(39157),h=t(51691),u=t(65661),m=t(35527),f=t(59962),g=t.n(f),v=t(78983),w=t(77530),D=t(55680),Z=t(57689),_=t(17746),b=t(44293),x=t(54970),E=t(80184);s.default=function(){var e=(0,Z.s0)(),s="",t="",f=(0,a.useState)(""),S=(0,r.Z)(f,2),y=S[0],j=S[1],A=(0,a.useState)("red"),I=(0,r.Z)(A,2),N=I[0],k=I[1],V=(0,a.useState)([]),C=(0,r.Z)(V,2),R=C[0],L=C[1],F=a.useState(!1),M=(0,r.Z)(F,2),T=M[0],O=M[1],P=(0,a.useState)({}),U=(0,r.Z)(P,2),q=U[0],G=U[1],H=(0,a.useState)(0),W=(0,r.Z)(H,2),K=W[0],z=W[1],Y=(0,a.useState)({receiveremail:"",receivername:""}),B=(0,r.Z)(Y,2),J=B[0],X=B[1];function $(){try{!function(){try{t=(0,b.pe)(window.localStorage.getItem("Kgr67W@"),_.Z.secretkeylocal)}catch(i){(0,x.Z)("Error","DisposeView","CheckRole Local Storage is tampered",i.message,s),e("/dashboard")}}(),"Admin"==t||"IT"==t?null==!window.localStorage.getItem("id")||"0"!==window.localStorage.getItem("id")?s=(0,b.pe)(window.localStorage.getItem("id"),_.Z.secretkeylocal):e("/login"):e("/dashboard")}catch(i){e("/dashboard")}}function Q(e){$();try{var t=s;o.Z.post("http://localhost:3001/email/getemailinfo",{rowId:t}).then((function(e){var t=e.data.message;"Record Found"==t?X((0,i.Z)((0,i.Z)({},J),{},{receiveremail:e.data.result[0].email,receivername:e.data.result[0].userName})):"No Record Found"==t&&(0,x.Z)("Error","DisposeView","GetEmailInfo /email/getemailinfo",t+"\n"+e.data.message,s)})).catch((function(e){(0,x.Z)("Error","DisposeView","GetEmailInfo /assets/getallassetsavailable","then/catch \n "+e.message,s)}))}catch(r){(0,x.Z)("Error","DisposeView","GetEmailInfo /assets/updateassetdeploy","Error in try/catch",s)}}function ee(e){try{e.preventDefault(),j(""),k("red");try{var t=0;q.forEach((function(e,s){t+=1})),z(t),Q(),O(!0)}catch(i){console.log(i),O(!1)}}catch(i){(0,x.Z)("Error","AssetUser","handleSubmit /assets/searchuser",i.message,s)}}(0,a.useEffect)((function(){$()}),[]),(0,a.useEffect)((function(){!function(){try{$();var e="http://localhost:3001/dispose/viewallassetdispose";o.Z.post(e).then((function(e){"Record Found"==e.data.message&&L(e.data.result)})).catch((function(e){(0,x.Z)("Error","DisposeView","useEffect /dispose/viewallassetdispose","Error in then/catch \n"+e.message,s)}))}catch(t){(0,x.Z)("Error","DisposeView"," LoadData /dispose/viewallassetdispose","Error in try/catch \n"+t.message,s)}}(),Q()}),[]),(0,a.useEffect)((function(){}),[J]);var se=function(){O(!1)};var te=a.useMemo((function(){return[{field:"isApprove",headerName:"Approve",width:70,editable:!1},{field:"serialNo",headerName:"Serial No",width:100,editable:!1},{field:"assetCode",headerName:"Code",width:150,editable:!1},{field:"assetName",headerName:"Name",width:150,editable:!1},{field:"assetCategName",headerName:"Category",width:150,editable:!1},{field:"boxName",headerName:"Box",width:150,editable:!1},{field:"suppliername",headerName:"Supplier",width:200,editable:!1},{field:"statfrom",headerName:"Status From",width:150,editable:!1},{field:"statto",headerName:"Status Dispose",width:150,editable:!1},{field:"displayName",headerName:"User",width:150,editable:!1},{field:"disposedate",headerName:"Date",width:150,editable:!1}]}),[]);return(0,E.jsx)(v.b7,{xs:12,children:(0,E.jsxs)(v.xH,{className:"mb-3",size:"sm",children:[(0,E.jsx)(v.bn,{children:(0,E.jsxs)("h6",{children:[(0,E.jsxs)("span",{className:"message",style:{color:"#5da4f5"},children:[" ",(0,E.jsx)(E.Fragment,{children:" Dispose "})]}),(0,E.jsx)("br",{}),(0,E.jsxs)("strong",{children:[(0,E.jsx)("span",{className:"message",style:{color:N},children:(0,E.jsx)("p",{children:y})})," "]})]})}),(0,E.jsxs)(v.lx,{onSubmit:ee,children:[(0,E.jsx)(v.rb,{children:(0,E.jsx)(v.b7,{children:(0,E.jsx)(v.sl,{children:(0,E.jsx)("div",{style:{height:400,width:"100%"},children:(0,E.jsx)(n._$,{rows:R,columns:te,initialState:{pagination:{paginationModel:{pageSize:10}}},checkboxSelection:!0,pageSizeOptions:[10],rowSelection:!0,getRowId:function(e){return e.id},onRowSelectionModelChange:function(e){return G(e)}})})})})}),(0,E.jsxs)(v.rb,{children:[(0,E.jsx)("div",{className:"d-grid",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,E.jsx)(v.u5,{style:{margin:"5px",width:"120%"},color:"success",onClick:ee,children:"Approve"})}),(0,E.jsxs)(d.Z,{open:T,onClose:se,PaperComponent:function(e){return(0,E.jsx)(g(),{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:(0,E.jsx)(m.Z,(0,i.Z)({},e))})},"aria-labelledby":"draggable-dialog-title",children:[(0,E.jsx)(u.Z,{style:{cursor:"move"},id:"draggable-dialog-title",children:"Dispose"}),(0,E.jsx)(p.Z,{children:(0,E.jsxs)(h.Z,{children:["Are you sure you want to Dispose Asset(s) ?",(0,E.jsx)("br",{}),(0,E.jsx)("br",{}),"Selected : ",K]})}),(0,E.jsxs)(l.Z,{children:[(0,E.jsx)(c.Z,{autoFocus:!0,onClick:se,children:"Cancel"}),(0,E.jsx)(c.Z,{onClick:function(){try{q.forEach((function(e,t){""==!e&&function(e){$();try{var t=e,i="http://localhost:3001/dispose/checkassetdispose_approve_exist";o.Z.post(i,{rowId:t}).then((function(e){var i=e.data.message;"Record Found"==i?function(e,t){try{$();var i="http://localhost:3001/dispose/AssetDispose_Approve";o.Z.post(i,{userID:s,disposeid:e,assetid:t}).then((function(i){var r=i.data.message;"Update Error"==r?(0,x.Z)("Error","DisposeView","AssetDispose_Single /dispose/AssetDispose_Approve",i.message2,s):"Update Success"==r&&(window.localStorage.setItem("Kvsf45_","1"),(0,x.Z)("Message","DisposeView","AssetDispose /dispose/AssetDispose_Approve","Asset Dispose \n AssetID: "+t+"\n Dispose ID: "+e,s))})).catch((function(e){(0,x.Z)("Error","DisposeView","AssetDispose_Single /dispose/AssetDispose_Approve","Error in then/catch \n"+e.message,s)}))}catch(r){(0,x.Z)("Error","DisposeView"," AssetDispose_Single /dispose/AssetDispose_Approve","Error in try/catch \n"+r.message,s)}}(t,e.data.result[0].assetID):"No Record Found"==i&&(j("Asset already mark as Dispose contact Support Team"),k("red"),(0,x.Z)("Error","DisposeView","CheckDispose /dispose/checkassetdispose_approve_exist",i+"\n Asset already mark as Dispose contact Support Team",s))})).catch((function(e){(0,x.Z)("Error","DisposeView","CheckDispose /dispose/checkassetdispose_approve_exist","Error in then/catch \n"+e.message,s)}))}catch(r){(0,x.Z)("Error","DisposeView","CheckDispose","Error in try/catch \n"+r.message,s)}}(e)}));var t=window.localStorage.getItem("Kvsf45_");"1"==t?function(){var e=(0,D.Z)();try{var t={email_to:J.receiveremail,email_sender:_.Z.email_sender,reply_to:_.Z.reply_to,name:J.receivername,notes:"Asset is now approve for Dispose",date:e};"send"==_.Z.ALLOW_SENDEMAIL_APPROVE_DISPOSE?w.ZP.send(_.Z.YOUR_SERVICE_ID,_.Z.YOUR_TEMPLATE_ID,t,_.Z.public_key).then((function(e){WriteUserInfo("Info","DisposeView",s,"Approve Asset Dispose : \nNotes : "+t.notes,s)}),(function(e){WriteUserInfo("Error","DisposeView",s,"Info : Failed sending email Approve Dispose : "+s+"\nNotes : "+t.notes+"\n Response : "+e,s)})):WriteUserInfo("Info","DisposeView",s,"Approve Asset Dispose : \nNotes : "+t.notes,s)}catch(i){console.log(i)}}():"1"==!t||"0"==!t?(0,x.Z)("Error","DisposeView","Get_LocalStorage_Dispose","LocalStorage is tampered \n ",s):(0,x.Z)("Error","DisposeView","Get_LocalStorage_Dispose","Local Storage issue \n ",s)}catch(i){O(!1),e("/dashboard")}},children:"Approve"})]})]})]})]})]})})}},77530:function(e,s,t){t.d(s,{ZP:function(){return d}});var i={_origin:"https://api.emailjs.com"},r=function(e,s,t){if(!e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!s)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0},a=t(43144),o=t(15671),n=(0,a.Z)((function e(s){(0,o.Z)(this,e),this.status=s?s.status:0,this.text=s?s.responseText:"Network Error"})),c=function(e,s){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(r,a){var o=new XMLHttpRequest;o.addEventListener("load",(function(e){var s=e.target,t=new n(s);200===t.status||"OK"===t.text?r(t):a(t)})),o.addEventListener("error",(function(e){var s=e.target;a(new n(s))})),o.open("POST",i._origin+e,!0),Object.keys(t).forEach((function(e){o.setRequestHeader(e,t[e])})),o.send(s)}))},d={init:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https://api.emailjs.com";i._userID=e,i._origin=s},send:function(e,s,t,a){var o=a||i._userID;r(o,e,s);var n={lib_version:"3.11.0",user_id:o,service_id:e,template_id:s,template_params:t};return c("/api/v1.0/email/send",JSON.stringify(n),{"Content-type":"application/json"})},sendForm:function(e,s,t,a){var o=a||i._userID,n=function(e){var s;if(!(s="string"===typeof e?document.querySelector(e):e)||"FORM"!==s.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return s}(t);r(o,e,s);var d=new FormData(n);return d.append("lib_version","3.11.0"),d.append("service_id",e),d.append("template_id",s),d.append("user_id",o),c("/api/v1.0/email/send-form",d)}}}}]);
//# sourceMappingURL=1103.409814a7.chunk.js.map