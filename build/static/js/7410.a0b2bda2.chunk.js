"use strict";(self.webpackChunkasset=self.webpackChunkasset||[]).push([[7410],{55680:function(e,s){s.Z=function(){var e=new Date,s=e.getFullYear(),t=e.getMonth()+1,a=e.getDate();return e.getHours(),e.getMinutes(),e.getSeconds(),t+"/"+a+"/"+s}},56215:function(e,s,t){var a=t(31243);s.Z=function(e,s,t,r,n,o,c){try{a.Z.post("http://localhost:3001/log/putUserNotif",{logtype:e,module:s,userNotifID:t,receiver_name:r,receiver_dept:n,logvalues:o,userID:c}).then((function(e){var s=e.data.message;"Insert Success"==s?!0:console.log(s)})).catch((function(e){console.log(e)}))}catch(l){console.log("Writing error -- "+l)}}},27410:function(e,s,t){t.r(s);var a=t(4942),r=t(1413),n=t(29439),o=t(72791),c=t(31243),l=t(24750),i=t(66798),d=t(14693),u=t(27391),h=t(15493),m=t(24518),g=t(5574),f=t(97123),p=t(39157),Z=t(51691),y=t(65661),v=t(35527),I=t(59962),b=t.n(I),E=t(78983),A=t(77530),x=t(55680),D=t(57689),j=t(17746),S=t(44293),U=t(54970),C=t(56215),w=(t(4751),t(80184));s.default=function(){var e=(0,D.s0)(),s="",t="",I=(0,o.useState)(""),N=(0,n.Z)(I,2),k=N[0],_=N[1],R=(0,o.useState)("red"),F=(0,n.Z)(R,2),O=F[0],M=F[1],T=(0,o.useState)([]),z=(0,n.Z)(T,2),Y=z[0],K=z[1],L=(0,o.useState)(""),P=(0,n.Z)(L,2),W=P[0],G=P[1],H=(0,o.useState)([]),B=(0,n.Z)(H,2),V=B[0],X=B[1],$=(0,o.useState)(""),q=(0,n.Z)($,2),J=q[0],Q=q[1],ee=(0,o.useState)({}),se=(0,n.Z)(ee,2),te=se[0],ae=se[1],re=(0,o.useState)({userid:"",notes:""}),ne=(0,n.Z)(re,2),oe=ne[0],ce=ne[1],le=(0,o.useState)({receiverID:"",receiveremail:"",receivername:"",positionID:"",deptID:""}),ie=(0,n.Z)(le,2),de=ie[0],ue=ie[1];function he(){try{t=s=(0,S.pe)(window.localStorage.getItem("Kgr67W@"),j.Z.secretkeylocal)}catch(a){(0,U.Z)("Error","AssetUser","CheckRole Local Storage is tampered",a.message,s),e("/dashboard")}}function me(){try{he(),"Admin"==t||"IT"==t?null==!window.localStorage.getItem("id")||"0"!==window.localStorage.getItem("id")?s=(0,S.pe)(window.localStorage.getItem("id"),j.Z.secretkeylocal):e("/login"):e("/dashboard")}catch(a){e("/dashboard")}}(0,o.useEffect)((function(){he(),me(),function(){try{var e="http://localhost:3001/getuserbyactive";c.Z.post(e,{userID:s}).then((function(e){var t=e.data.message;"Record Found"==t?X(e.data.result):"No Record Found"==t&&(0,U.Z)("Error","AssetUser","useeffect /getuserbyactive'",t,s)})).catch((function(e){(0,U.Z)("Error","AssetUser","useeffect /getuserbyactive'","Error in then/catch "+e.message,s)}))}catch(t){(0,U.Z)("Error","AssetUser","GetUsersActive /getuserbyactive'","Error in try/catch "+t.message,s)}}(),function(){try{var e="http://localhost:3001/assets/getassetfordeploystatus";c.Z.post(e).then((function(e){var t=e.data.message;"Record Found"==t?G(e.data.result[0].assetStatusID):"No Record Found"==t&&(0,U.Z)("Error","AssetUser","useeffect /assets/getassetfordeploystatus",e.data.message2,s)})).catch((function(e){(0,U.Z)("Error","AssetUser","useeffect /assets/getassetfordeploystatus","then/catch \n"+e.message,s)}))}catch(t){(0,U.Z)("Error","AssetUser","useeffect /assets/getassetfordeploystatus","try/catch \n"+t.message,s)}}()}),[]),(0,o.useEffect)((function(){try{c.Z.post("http://localhost:3001/assets/getallassetsavailable").then((function(e){var s=e.data.message;"Record Found"==s?K(e.data.result):"No Record Found"==s&&(_("No assets available"),M("red"))})).catch((function(e){(0,U.Z)("Error","AssetUser","useEffect /assets/getallassetsavailable","then/catch \n "+e.message,s)}))}catch(e){(0,U.Z)("Error","AssetUser","useEffect /assets/getallassetsavailable","try/catch \n"+e.message,s)}}),[]);function ge(e){ce((0,r.Z)((0,r.Z)({},oe),{},(0,a.Z)({},e.target.name,e.target.value)))}(0,o.useEffect)((function(){}),[Y]);var fe=function(){ve(!1)};var pe=o.useState(!1),Ze=(0,n.Z)(pe,2),ye=Ze[0],ve=Ze[1],Ie=(0,o.useState)(0),be=(0,n.Z)(Ie,2),Ee=be[0],Ae=be[1];return(0,w.jsx)(E.b7,{xs:12,children:(0,w.jsxs)(E.xH,{className:"mb-3",size:"sm",children:[(0,w.jsx)(E.bn,{children:(0,w.jsxs)("h6",{children:[(0,w.jsxs)("span",{className:"message",style:{color:"#5da4f5"},children:[" ",(0,w.jsx)(w.Fragment,{children:" Asset Check Out  "})]}),(0,w.jsx)("br",{}),(0,w.jsxs)("strong",{children:[(0,w.jsx)("span",{className:"message",style:{color:O},children:(0,w.jsx)("p",{children:k})})," "]})]})}),(0,w.jsx)(E.sl,{children:(0,w.jsx)(E.lx,{onSubmit:function(e){try{if(window.localStorage.setItem("Kvsf45_","0"),e.preventDefault(),Object.keys(te).length>0){var t=oe.userid,a=J,n=oe.notes;""!==t&&""!==a&&""!==n?(_(""),M(""),Ae(Object.keys(te).length),function(e){try{var t=e,a="http://localhost:3001/email/getemailinfo";c.Z.post(a,{rowId:t}).then((function(e){var t=e.data.message;"Record Found"==t?ue((0,r.Z)((0,r.Z)({},de),{},{receiverID:e.data.result[0].userID,receiveremail:e.data.result[0].email,receivername:e.data.result[0].userName,positionID:e.data.result[0].positionID,deptID:e.data.result[0].deptID})):"No Record Found"==t&&(0,U.Z)("Error","AssetUser","GetEmailInfo /email/getemailinfo","then/catch \n "+e.data.message,s)})).catch((function(e){(0,U.Z)("Error","AssetUser","GetEmailInfo /assets/getallassetsavailable","then/catch \n "+e.message,s)}))}catch(n){(0,U.Z)("Error","AssetUser","GetEmailInfo /assets/updateassetdeploy","Error in try/catch",s)}}(t),ve(!0)):(ve(!1),_(" All Fields must not be Empty"),M("orange"))}else _("No Asset Selected"),M("orange")}catch(o){(0,U.Z)("Error","AssetUser","handleSubmit /assets/searchuser",o.message,s)}},children:(0,w.jsxs)(E.rb,{children:[(0,w.jsxs)(E.b7,{xs:4,md:3,xl:3,children:[(0,w.jsx)(E.LX,{size:"sm",className:"mb-3","aria-label":"Small select example",name:"userid",onChange:ge,children:V.map((function(e,s){return(0,w.jsxs)("option",{value:e.userDisplayID,children:[" ",e.fullname," "]},e.userDisplayID)}))}),(0,w.jsx)(E.YR,{size:"sm",className:"mb-3",children:(0,w.jsx)(i._,{dateAdapter:l.y,children:(0,w.jsx)(d.M,{size:"sm",name:"checkout  ",label:"Plan Checkout ",fullWidth:!0,true:!0,onChange:function(e){return Q(e)}})})}),(0,w.jsx)(E.YR,{size:"sm",className:"mb-3",children:(0,w.jsx)(u.Z,{onChange:ge,name:"notes",id:"outlined-textarea",fullWidth:!0,label:"Notes",placeholder:"You have asset(s) to be pickup on schedule date",multiline:!0,rows:5})}),(0,w.jsx)("div",{className:"d-grid",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,w.jsx)(E.u5,{color:"success",type:"submit",children:"Assign Asset"})})]}),(0,w.jsxs)(E.b7,{xs:6,md:9,xl:9,children:[(0,w.jsx)(h._$,{rows:Y,columns:[{field:"assetCode",headerName:"Code",width:120,editable:!1},{field:"assetCategName",headerName:"Category",width:100,editable:!1},{field:"assetName",headerName:"Name",width:200,editable:!1},{field:"statusName",headerName:"Status",width:130,editable:!1}],initialState:{pagination:{paginationModel:{pageSize:5}}},pageSizeOptions:[5],checkboxSelection:!0,disableRowSelectionOnClick:!0,onRowSelectionModelChange:function(e){return ae(e)}}),(0,w.jsxs)(g.Z,{open:ye,onClose:fe,PaperComponent:function(e){return(0,w.jsx)(b(),{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:(0,w.jsx)(v.Z,(0,r.Z)({},e))})},"aria-labelledby":"draggable-dialog-title",children:[(0,w.jsx)(y.Z,{style:{cursor:"move"},id:"draggable-dialog-title",children:"Checkout  Asset(s)"}),(0,w.jsx)(p.Z,{children:(0,w.jsxs)(Z.Z,{children:["Are you sure you want to Checkout  asset(s) ?",(0,w.jsx)("br",{}),"Selected : ",Ee]})}),(0,w.jsxs)(f.Z,{children:[(0,w.jsx)(m.Z,{autoFocus:!0,onClick:fe,children:"Cancel"}),(0,w.jsx)(m.Z,{onClick:function(){ve(!1),function(){var e=oe.userid,t=oe.notes,a=de.positionID,r=de.deptID;try{me(),te.forEach((function(n,o){var l=n,i="http://localhost:3001/assets/putassetsdetail";c.Z.post(i,{varuserid:e,assetid:l,positionID:a,departmentID:r,checkout:J,userID:s,assetdeploy:W,varnotes:t}).then((function(a){var r=a.data.message;"Insert Success"==r?("0"==window.localStorage.getItem("Kvsf45_")&&window.localStorage.setItem("Kvsf45_","1"),(0,U.Z)("Message","AssetUser","InsertAssetDetail /assets/putassetsdetail","Asset Checkout \n AssetID: "+l+"\n Checkout To :  "+e+"\n Status :  "+W+"\n Desc : "+t,s),function(e){try{var t="http://localhost:3001/assets/updateassetdeploy";c.Z.post(t,{assetdeploy:W,varassetid:e,userID:s}).then((function(e){"Update Error"==e.data.message&&(0,U.Z)("Error","AssetUser","UpdateAssetDeploy /assets/updateassetdeploy",e.data.message2,s)})).catch((function(e){(0,U.Z)("Error","AssetUser","UpdateAssetDeploy /assets/updateassetdeploy",e.message,s)}))}catch(a){(0,U.Z)("Error","AssetUser","UpdateAssetDeploy /assets/updateassetdeploy","Error in try/catch"+a.message,s)}}(l)):"Insert Error"==r&&(0,U.Z)("Error","AssetUser","InsertAssetDetail /assets/putassetsdetail",a.data.message2,s)})).catch((function(e){(0,U.Z)("Error","AssetUser","InsertAssetDetail /assets/putassetsdetail"," Error in then/catch "+e.message,s)}))}))}catch(n){(0,U.Z)("Error","AssetUser","InsertAssetDetail /assets/putassetsdetail"," Error in try/catch "+n.message,s)}}(),function(e){var t=(0,x.Z)(),a=j.Z.ALLOW_SENDEMAIL_CHECKOUT_BY_IT,r=window.localStorage.getItem("Kvsf45_");try{var n={email_to:de.receiveremail,email_sender:j.Z.email_sender,reply_to:j.Z.reply_to,name:de.receivername,notes:oe.notes,date:t};"0"===r&&("send"===a?A.ZP.send(j.Z.YOUR_SERVICE_ID,j.Z.YOUR_TEMPLATE_ID,n,j.Z.public_key).then((function(t){(0,C.Z)("Info","AssetUser",e,de.receivername,de.deptID,"Asset Check Out by IT \nNotes : "+n.notes,s)}),(function(t){(0,U.Z)("Error","AssetUser","sendEmail ","Error in sending emailjs \nInfo : Failed sending email to selected user : "+e+"\nPlan receive asset : "+n.date+"\n Notes : "+n.notes+"\n"+t.message,s)})):(0,C.Z)("Info","AssetUser",e,de.receivername,de.deptID,"Asset Check Out by IT \nNotes : "+n.notes,s))}catch(o){(0,U.Z)("Error","AssetUser","send emailjs","Error in try/catch "+o.message,s)}}(oe.userid),e("/dashboard")},children:"Checkout"})]})]})]})]})})})]})})}}}]);
//# sourceMappingURL=7410.a0b2bda2.chunk.js.map