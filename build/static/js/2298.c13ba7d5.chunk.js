"use strict";(self.webpackChunkasset=self.webpackChunkasset||[]).push([[2298],{55680:function(e,s){s.Z=function(){var e=new Date,s=e.getFullYear(),t=e.getMonth()+1,a=e.getDate();return e.getHours(),e.getMinutes(),e.getSeconds(),t+"/"+a+"/"+s}},56215:function(e,s,t){var a=t(31243);s.Z=function(e,s,t,n,o,r,c){try{a.Z.post("http://localhost:3001/log/putUserNotif",{logtype:e,module:s,userNotifID:t,receiver_name:n,receiver_dept:o,logvalues:r,userID:c}).then((function(e){var s=e.data.message;"Insert Success"==s?!0:console.log(s)})).catch((function(e){console.log(e)}))}catch(i){console.log("Writing error -- "+i)}}},62298:function(e,s,t){t.r(s);var a=t(12860),n=t(1413),o=t(29439),r=t(72791),c=t(31243),i=t(15493),l=t(78983),d=t(24518),u=t(5574),h=t(97123),g=t(39157),f=t(51691),p=t(65661),m=t(35527),A=t(59962),Z=t.n(A),y=t(57689),E=t(17746),v=t(44293),I=t(54970),D=t(55680),w=t(56215),S=t(80184);s.default=function(){var e=(0,y.s0)(),s="",t=(0,r.useState)(""),A=(0,o.Z)(t,2),C=A[0],x=(A[1],(0,r.useState)("red")),k=(0,o.Z)(x,2),U=k[0],j=(k[1],(0,r.useState)([])),N=(0,o.Z)(j,2),_=N[0],b=N[1],R=(0,r.useState)(""),F=(0,o.Z)(R,2),M=F[0],L=F[1],B=(0,r.useState)(""),T=(0,o.Z)(B,2),K=T[0],O=T[1],Y=(0,r.useState)({}),z=(0,o.Z)(Y,2),H=z[0],P=z[1],V=(0,r.useState)(0),W=(0,o.Z)(V,2),$=W[0],q=W[1],G=r.useState(!1),J=(0,o.Z)(G,2),Q=J[0],X=J[1];function ee(){try{null==!window.localStorage.getItem("id")||"0"!==window.localStorage.getItem("id")?s=(0,v.pe)(window.localStorage.getItem("id"),E.Z.secretkeylocal):e("/login")}catch(t){e("/dashboard")}}(0,r.useEffect)((function(){ee(),te()}),[]),(0,r.useEffect)((function(){try{""==s&&ee();c.Z.post("http://localhost:3001/assets/viewallassetsassignfordeploy",{userID:s}).then((function(e){"Record Found"==e.data.message&&b(e.data.result)})).catch((function(e){(0,I.Z)("Error","AssetUserAssign","LoadData /assets/viewallassetsassignfordeploy",e.message,s)}))}catch(e){(0,I.Z)("Error","AssetUserAssign","LoadData /assets/viewallassetsassignfordeploy",e.message,s)}}),[]),(0,r.useEffect)((function(){}),[_]);(0,r.useEffect)((function(){}),[$]);var se=function(){X(!1)};function te(){try{""==s&&ee();c.Z.post("http://localhost:3001/assets/viewallassetsassignfordeploy",{userID:s}).then((function(e){"Record Found"==e.data.message&&b(e.data.result)})).catch((function(e){(0,I.Z)("Error","AssetUserAssign","LoadData /assets/viewallassetsassignfordeploy",e.message,s)}))}catch(e){(0,I.Z)("Error","AssetUserAssign","LoadData /assets/viewallassetsassignfordeploy",e.message,s)}}(0,r.useEffect)((function(){""==s&&ee();c.Z.post("http://localhost:3001/assets/getassetfordeploystatus").then((function(e){var t=e.data.message;"Record Found"==t?O(e.data.result[0].assetStatusID):"No Record Found"==t&&(0,I.Z)("Message","AssetUserAssign","useEffect /assets/getassetfordeploystatus",t,s)})).catch((function(e){(0,I.Z)("Error","AssetUserAssign","useEffect /assets/getassetfordeploystatus",e.message,s)}))}),[]),(0,r.useEffect)((function(){""==s&&ee();c.Z.post("http://localhost:3001/assets/getassetstatdeploy").then((function(e){var t=e.data.message;"Record Found"==t?L(e.data.result[0].assetStatusID):"No Record Found"==t&&(0,I.Z)("Message","AssetUserAssign","useEffect /assets/getassetstatdeploy",t,s)})).catch((function(e){(0,I.Z)("Message","AssetUserAssign","useEffect /assets/getassetstatdeploy",e.message,s)}))}),[]);return(0,S.jsx)(l.b7,{xs:12,children:(0,S.jsxs)(l.xH,{className:"mb-3",size:"sm",children:[(0,S.jsx)(l.bn,{children:(0,S.jsxs)("h6",{children:[(0,S.jsxs)("span",{className:"message",style:{color:"#5da4f5"},children:[" ",(0,S.jsx)(S.Fragment,{children:" Asset Checkin"})]}),(0,S.jsx)("br",{}),(0,S.jsxs)("strong",{children:[(0,S.jsx)("span",{className:"message",style:{color:U},children:(0,S.jsx)("p",{children:C})})," "]})]})}),(0,S.jsx)(l.lx,{children:(0,S.jsxs)(l.rb,{children:[(0,S.jsx)(l.b7,{xs:12,children:(0,S.jsx)(l.sl,{children:(0,S.jsx)(l.YR,{size:"sm",className:"mb-3",children:(0,S.jsx)("div",{style:{height:400,width:"100%"},children:(0,S.jsx)(i._$,{rows:_,columns:[{field:"assetCode",headerName:"Asset Code",width:150,editable:!1},{field:"assetName",headerName:"Name",width:150,editable:!1},{field:"statusName",headerName:"Status",width:100,editable:!1},{field:"assetCategName",headerName:"Category",width:150,editable:!1},{field:"displayName",headerName:"Checkout By",width:130,editable:!1},{field:"datecheckout",headerName:"Date Checkout",width:130,editable:!1}],initialState:{pagination:{paginationModel:{pageSize:5}}},pageSizeOptions:[5],checkboxSelection:!0,disableRowSelectionOnClick:!0,onRowSelectionModelChange:function(e){return P(e)}})})})})}),(0,S.jsx)("div",{className:"d-grid",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,S.jsx)(l.u5,{style:{width:"150%"},onClick:function(e){try{e.preventdefault;var s=0;H.forEach((function(e,t){s=t+1})),q(s),X(!0)}catch(t){console.log(t)}},color:"success",children:"Checkin"})}),(0,S.jsxs)(u.Z,{open:Q,onClose:se,PaperComponent:function(e){return(0,S.jsx)(Z(),{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:(0,S.jsx)(m.Z,(0,n.Z)({},e))})},"aria-labelledby":"draggable-dialog-title",children:[(0,S.jsx)(p.Z,{style:{cursor:"move"},id:"draggable-dialog-title",children:"CheckIn"}),(0,S.jsx)(g.Z,{children:(0,S.jsxs)(f.Z,{children:["Are you sure you want to Checkin / Receive asset(s) ?",(0,S.jsx)("br",{}),"Selected : (",$,")"]})}),(0,S.jsxs)(h.Z,{children:[(0,S.jsx)(d.Z,{autoFocus:!0,onClick:se,children:"Cancel"}),(0,S.jsx)(d.Z,{onClick:function(t){t.preventdefault,""==s&&ee(),function(){try{H.forEach((function(e){var t=e;(0,I.Z)("Error","AssetUserAssign","Hit ",t,s);var n="http://localhost:3001/assets/checkinassetsdetail";c.Z.post(n,{userID:s,assetstat:M,detailID:t}).then((function(e){var n=e.data.message;"Update Success"==n?(!function(e){var t=(0,r.useState)(""),n=(0,o.Z)(t,2),i=n[0],l=n[1];try{""==s&&ee();var d="http://localhost:3001/assets/getAssetID_By_detailID";c.Z.post(d,{paramdetailID:e}).then((function(e){var t=e.data.message;"Record Found"==t?(l(e.data.result[0].assetID),(0,I.Z)("Error","val ","val",i,s)):"No Record Found"==t?((0,I.Z)("Message","AssetUserAssign","UpdateAssetDeployed /assets/getAssetID_By_detailID",t,s),(0,I.Z)("Error","A ","A",i,s)):(0,I.Z)("Error","B ","B",i,s)})).catch((function(e){(0,I.Z)("Error","AssetUserAssign","UpdateAssetDeployed /assets/getAssetID_By_detailID"," Error in then/catch "+e.message,s),(0,a.Z)("varassetID"),(0,I.Z)("Error","C ","C",i,s)})),(0,I.Z)("Error","val1 ","va1l",i,s),(0,I.Z)("Message","AssetUserAssign","Test value if AssetID : "+i+" AND DETAILID : "+e,s);var u="http://localhost:3001/assets/updateassetdeploy";c.Z.post(u,{assetstat:M,userID:s,varassetID:i}).then((function(e){var t=e.data.message;"Record Found"==t?b(e.data.result):"No Record Found"==t&&(0,I.Z)("Message","AssetUserAssign","UpdateAssetDeployed /assets/updateassetdeploy",t,s)})).catch((function(e){(0,I.Z)("Error","AssetUserAssign","UpdateAssetDeployed /assets/updateassetdeploy","Error in then/catch "+e.message,s)}))}catch(h){(0,I.Z)("Error","AssetUserAssign","UpdateAssetDeployed","Error in main try/catch "+h.message,s)}}(t),"0"==window.localStorage.getItem("Kvsf45_")&&window.localStorage.setItem("Kvsf45_","1"),(0,I.Z)("Message","AssetUserAssign","handleCheckin /assets/checkinassetsdetail","User asset received or checkin \n Asset Detail ID: "+t+"\n Status From :  "+K+"\n Status To :  "+M+"\n Receive by : "+s,s)):"Update Error"==n&&((0,I.Z)("Error","AssetUserAssign","handleCheckin /assets/checkinassetsdetail",e.data.message2,s),window.localStorage.setItem("Kvsf45_","0"))})).catch((function(e){(0,I.Z)("Error","AssetUserAssign","handleCheckin /assets/checkinassetsdetail","Error in then/catch "+e.message,s)}))})),function(){try{var e=(0,D.Z)(),t=E.Z.ALLOW_SENDEMAIL_CHECKIN_BY_USER,a=window.localStorage.getItem("Kvsf45_"),n={email_to:E.Z.email_sender,email_sender:"",reply_to:"",name:E.Z.ASSET_RECEIVERNAME,notes:"Asset is now CheckIn on my end",date:e};"1"==a&&"send"==t?emailjs.send(E.Z.YOUR_SERVICE_ID,E.Z.YOUR_TEMPLATE_ID,n,E.Z.public_key).then((function(e){(0,I.Z)("Error","e","templateParams ","checkin_success ",s),(0,w.Z)("Info","AssetUserAssign",s,"CheckIn Asset : \nNotes : "+n.notes,s)}),(function(e){(0,w.Z)("Error","DisposeView",s,"Info : Failed sending email Approve Dispose : "+s+"\nNotes : "+n.notes+"\n Response : "+e,s)})):(0,w.Z)("Info","AssetUserAssign",s,"CheckIn Asset : \nNotes : "+n.notes,s)}catch(o){(0,I.Z)("Error","AssetUserAssign","LocalStorage checkin tampered",o.message,s)}}(),X(!1),te()}catch(t){X(!1),(0,I.Z)("Error","AssetUserAssign","handleCheckin /assets/checkinassetsdetail'","Error in try/catch "+t.message,s),e("/dashboard")}}()},children:"CheckIn"})]})]})]})})]})})}}}]);
//# sourceMappingURL=2298.c13ba7d5.chunk.js.map